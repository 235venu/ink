<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Source of the Rust file `crates/ink/macro/src/lib.rs`."><meta name="keywords" content="rust, rustlang, rust-lang"><title>lib.rs - source</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="../../source-script.js"></script><script defer src="../../source-files.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc source"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../ink_macro/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../ink_macro/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../ink_macro/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="example-wrap"><pre class="line-numbers"><span id="1">1</span>
<span id="2">2</span>
<span id="3">3</span>
<span id="4">4</span>
<span id="5">5</span>
<span id="6">6</span>
<span id="7">7</span>
<span id="8">8</span>
<span id="9">9</span>
<span id="10">10</span>
<span id="11">11</span>
<span id="12">12</span>
<span id="13">13</span>
<span id="14">14</span>
<span id="15">15</span>
<span id="16">16</span>
<span id="17">17</span>
<span id="18">18</span>
<span id="19">19</span>
<span id="20">20</span>
<span id="21">21</span>
<span id="22">22</span>
<span id="23">23</span>
<span id="24">24</span>
<span id="25">25</span>
<span id="26">26</span>
<span id="27">27</span>
<span id="28">28</span>
<span id="29">29</span>
<span id="30">30</span>
<span id="31">31</span>
<span id="32">32</span>
<span id="33">33</span>
<span id="34">34</span>
<span id="35">35</span>
<span id="36">36</span>
<span id="37">37</span>
<span id="38">38</span>
<span id="39">39</span>
<span id="40">40</span>
<span id="41">41</span>
<span id="42">42</span>
<span id="43">43</span>
<span id="44">44</span>
<span id="45">45</span>
<span id="46">46</span>
<span id="47">47</span>
<span id="48">48</span>
<span id="49">49</span>
<span id="50">50</span>
<span id="51">51</span>
<span id="52">52</span>
<span id="53">53</span>
<span id="54">54</span>
<span id="55">55</span>
<span id="56">56</span>
<span id="57">57</span>
<span id="58">58</span>
<span id="59">59</span>
<span id="60">60</span>
<span id="61">61</span>
<span id="62">62</span>
<span id="63">63</span>
<span id="64">64</span>
<span id="65">65</span>
<span id="66">66</span>
<span id="67">67</span>
<span id="68">68</span>
<span id="69">69</span>
<span id="70">70</span>
<span id="71">71</span>
<span id="72">72</span>
<span id="73">73</span>
<span id="74">74</span>
<span id="75">75</span>
<span id="76">76</span>
<span id="77">77</span>
<span id="78">78</span>
<span id="79">79</span>
<span id="80">80</span>
<span id="81">81</span>
<span id="82">82</span>
<span id="83">83</span>
<span id="84">84</span>
<span id="85">85</span>
<span id="86">86</span>
<span id="87">87</span>
<span id="88">88</span>
<span id="89">89</span>
<span id="90">90</span>
<span id="91">91</span>
<span id="92">92</span>
<span id="93">93</span>
<span id="94">94</span>
<span id="95">95</span>
<span id="96">96</span>
<span id="97">97</span>
<span id="98">98</span>
<span id="99">99</span>
<span id="100">100</span>
<span id="101">101</span>
<span id="102">102</span>
<span id="103">103</span>
<span id="104">104</span>
<span id="105">105</span>
<span id="106">106</span>
<span id="107">107</span>
<span id="108">108</span>
<span id="109">109</span>
<span id="110">110</span>
<span id="111">111</span>
<span id="112">112</span>
<span id="113">113</span>
<span id="114">114</span>
<span id="115">115</span>
<span id="116">116</span>
<span id="117">117</span>
<span id="118">118</span>
<span id="119">119</span>
<span id="120">120</span>
<span id="121">121</span>
<span id="122">122</span>
<span id="123">123</span>
<span id="124">124</span>
<span id="125">125</span>
<span id="126">126</span>
<span id="127">127</span>
<span id="128">128</span>
<span id="129">129</span>
<span id="130">130</span>
<span id="131">131</span>
<span id="132">132</span>
<span id="133">133</span>
<span id="134">134</span>
<span id="135">135</span>
<span id="136">136</span>
<span id="137">137</span>
<span id="138">138</span>
<span id="139">139</span>
<span id="140">140</span>
<span id="141">141</span>
<span id="142">142</span>
<span id="143">143</span>
<span id="144">144</span>
<span id="145">145</span>
<span id="146">146</span>
<span id="147">147</span>
<span id="148">148</span>
<span id="149">149</span>
<span id="150">150</span>
<span id="151">151</span>
<span id="152">152</span>
<span id="153">153</span>
<span id="154">154</span>
<span id="155">155</span>
<span id="156">156</span>
<span id="157">157</span>
<span id="158">158</span>
<span id="159">159</span>
<span id="160">160</span>
<span id="161">161</span>
<span id="162">162</span>
<span id="163">163</span>
<span id="164">164</span>
<span id="165">165</span>
<span id="166">166</span>
<span id="167">167</span>
<span id="168">168</span>
<span id="169">169</span>
<span id="170">170</span>
<span id="171">171</span>
<span id="172">172</span>
<span id="173">173</span>
<span id="174">174</span>
<span id="175">175</span>
<span id="176">176</span>
<span id="177">177</span>
<span id="178">178</span>
<span id="179">179</span>
<span id="180">180</span>
<span id="181">181</span>
<span id="182">182</span>
<span id="183">183</span>
<span id="184">184</span>
<span id="185">185</span>
<span id="186">186</span>
<span id="187">187</span>
<span id="188">188</span>
<span id="189">189</span>
<span id="190">190</span>
<span id="191">191</span>
<span id="192">192</span>
<span id="193">193</span>
<span id="194">194</span>
<span id="195">195</span>
<span id="196">196</span>
<span id="197">197</span>
<span id="198">198</span>
<span id="199">199</span>
<span id="200">200</span>
<span id="201">201</span>
<span id="202">202</span>
<span id="203">203</span>
<span id="204">204</span>
<span id="205">205</span>
<span id="206">206</span>
<span id="207">207</span>
<span id="208">208</span>
<span id="209">209</span>
<span id="210">210</span>
<span id="211">211</span>
<span id="212">212</span>
<span id="213">213</span>
<span id="214">214</span>
<span id="215">215</span>
<span id="216">216</span>
<span id="217">217</span>
<span id="218">218</span>
<span id="219">219</span>
<span id="220">220</span>
<span id="221">221</span>
<span id="222">222</span>
<span id="223">223</span>
<span id="224">224</span>
<span id="225">225</span>
<span id="226">226</span>
<span id="227">227</span>
<span id="228">228</span>
<span id="229">229</span>
<span id="230">230</span>
<span id="231">231</span>
<span id="232">232</span>
<span id="233">233</span>
<span id="234">234</span>
<span id="235">235</span>
<span id="236">236</span>
<span id="237">237</span>
<span id="238">238</span>
<span id="239">239</span>
<span id="240">240</span>
<span id="241">241</span>
<span id="242">242</span>
<span id="243">243</span>
<span id="244">244</span>
<span id="245">245</span>
<span id="246">246</span>
<span id="247">247</span>
<span id="248">248</span>
<span id="249">249</span>
<span id="250">250</span>
<span id="251">251</span>
<span id="252">252</span>
<span id="253">253</span>
<span id="254">254</span>
<span id="255">255</span>
<span id="256">256</span>
<span id="257">257</span>
<span id="258">258</span>
<span id="259">259</span>
<span id="260">260</span>
<span id="261">261</span>
<span id="262">262</span>
<span id="263">263</span>
<span id="264">264</span>
<span id="265">265</span>
<span id="266">266</span>
<span id="267">267</span>
<span id="268">268</span>
<span id="269">269</span>
<span id="270">270</span>
<span id="271">271</span>
<span id="272">272</span>
<span id="273">273</span>
<span id="274">274</span>
<span id="275">275</span>
<span id="276">276</span>
<span id="277">277</span>
<span id="278">278</span>
<span id="279">279</span>
<span id="280">280</span>
<span id="281">281</span>
<span id="282">282</span>
<span id="283">283</span>
<span id="284">284</span>
<span id="285">285</span>
<span id="286">286</span>
<span id="287">287</span>
<span id="288">288</span>
<span id="289">289</span>
<span id="290">290</span>
<span id="291">291</span>
<span id="292">292</span>
<span id="293">293</span>
<span id="294">294</span>
<span id="295">295</span>
<span id="296">296</span>
<span id="297">297</span>
<span id="298">298</span>
<span id="299">299</span>
<span id="300">300</span>
<span id="301">301</span>
<span id="302">302</span>
<span id="303">303</span>
<span id="304">304</span>
<span id="305">305</span>
<span id="306">306</span>
<span id="307">307</span>
<span id="308">308</span>
<span id="309">309</span>
<span id="310">310</span>
<span id="311">311</span>
<span id="312">312</span>
<span id="313">313</span>
<span id="314">314</span>
<span id="315">315</span>
<span id="316">316</span>
<span id="317">317</span>
<span id="318">318</span>
<span id="319">319</span>
<span id="320">320</span>
<span id="321">321</span>
<span id="322">322</span>
<span id="323">323</span>
<span id="324">324</span>
<span id="325">325</span>
<span id="326">326</span>
<span id="327">327</span>
<span id="328">328</span>
<span id="329">329</span>
<span id="330">330</span>
<span id="331">331</span>
<span id="332">332</span>
<span id="333">333</span>
<span id="334">334</span>
<span id="335">335</span>
<span id="336">336</span>
<span id="337">337</span>
<span id="338">338</span>
<span id="339">339</span>
<span id="340">340</span>
<span id="341">341</span>
<span id="342">342</span>
<span id="343">343</span>
<span id="344">344</span>
<span id="345">345</span>
<span id="346">346</span>
<span id="347">347</span>
<span id="348">348</span>
<span id="349">349</span>
<span id="350">350</span>
<span id="351">351</span>
<span id="352">352</span>
<span id="353">353</span>
<span id="354">354</span>
<span id="355">355</span>
<span id="356">356</span>
<span id="357">357</span>
<span id="358">358</span>
<span id="359">359</span>
<span id="360">360</span>
<span id="361">361</span>
<span id="362">362</span>
<span id="363">363</span>
<span id="364">364</span>
<span id="365">365</span>
<span id="366">366</span>
<span id="367">367</span>
<span id="368">368</span>
<span id="369">369</span>
<span id="370">370</span>
<span id="371">371</span>
<span id="372">372</span>
<span id="373">373</span>
<span id="374">374</span>
<span id="375">375</span>
<span id="376">376</span>
<span id="377">377</span>
<span id="378">378</span>
<span id="379">379</span>
<span id="380">380</span>
<span id="381">381</span>
<span id="382">382</span>
<span id="383">383</span>
<span id="384">384</span>
<span id="385">385</span>
<span id="386">386</span>
<span id="387">387</span>
<span id="388">388</span>
<span id="389">389</span>
<span id="390">390</span>
<span id="391">391</span>
<span id="392">392</span>
<span id="393">393</span>
<span id="394">394</span>
<span id="395">395</span>
<span id="396">396</span>
<span id="397">397</span>
<span id="398">398</span>
<span id="399">399</span>
<span id="400">400</span>
<span id="401">401</span>
<span id="402">402</span>
<span id="403">403</span>
<span id="404">404</span>
<span id="405">405</span>
<span id="406">406</span>
<span id="407">407</span>
<span id="408">408</span>
<span id="409">409</span>
<span id="410">410</span>
<span id="411">411</span>
<span id="412">412</span>
<span id="413">413</span>
<span id="414">414</span>
<span id="415">415</span>
<span id="416">416</span>
<span id="417">417</span>
<span id="418">418</span>
<span id="419">419</span>
<span id="420">420</span>
<span id="421">421</span>
<span id="422">422</span>
<span id="423">423</span>
<span id="424">424</span>
<span id="425">425</span>
<span id="426">426</span>
<span id="427">427</span>
<span id="428">428</span>
<span id="429">429</span>
<span id="430">430</span>
<span id="431">431</span>
<span id="432">432</span>
<span id="433">433</span>
<span id="434">434</span>
<span id="435">435</span>
<span id="436">436</span>
<span id="437">437</span>
<span id="438">438</span>
<span id="439">439</span>
<span id="440">440</span>
<span id="441">441</span>
<span id="442">442</span>
<span id="443">443</span>
<span id="444">444</span>
<span id="445">445</span>
<span id="446">446</span>
<span id="447">447</span>
<span id="448">448</span>
<span id="449">449</span>
<span id="450">450</span>
<span id="451">451</span>
<span id="452">452</span>
<span id="453">453</span>
<span id="454">454</span>
<span id="455">455</span>
<span id="456">456</span>
<span id="457">457</span>
<span id="458">458</span>
<span id="459">459</span>
<span id="460">460</span>
<span id="461">461</span>
<span id="462">462</span>
<span id="463">463</span>
<span id="464">464</span>
<span id="465">465</span>
<span id="466">466</span>
<span id="467">467</span>
<span id="468">468</span>
<span id="469">469</span>
<span id="470">470</span>
<span id="471">471</span>
<span id="472">472</span>
<span id="473">473</span>
<span id="474">474</span>
<span id="475">475</span>
<span id="476">476</span>
<span id="477">477</span>
<span id="478">478</span>
<span id="479">479</span>
<span id="480">480</span>
<span id="481">481</span>
<span id="482">482</span>
<span id="483">483</span>
<span id="484">484</span>
<span id="485">485</span>
<span id="486">486</span>
<span id="487">487</span>
<span id="488">488</span>
<span id="489">489</span>
<span id="490">490</span>
<span id="491">491</span>
<span id="492">492</span>
<span id="493">493</span>
<span id="494">494</span>
<span id="495">495</span>
<span id="496">496</span>
<span id="497">497</span>
<span id="498">498</span>
<span id="499">499</span>
<span id="500">500</span>
<span id="501">501</span>
<span id="502">502</span>
<span id="503">503</span>
<span id="504">504</span>
<span id="505">505</span>
<span id="506">506</span>
<span id="507">507</span>
<span id="508">508</span>
<span id="509">509</span>
<span id="510">510</span>
<span id="511">511</span>
<span id="512">512</span>
<span id="513">513</span>
<span id="514">514</span>
<span id="515">515</span>
<span id="516">516</span>
<span id="517">517</span>
<span id="518">518</span>
<span id="519">519</span>
<span id="520">520</span>
<span id="521">521</span>
<span id="522">522</span>
<span id="523">523</span>
<span id="524">524</span>
<span id="525">525</span>
<span id="526">526</span>
<span id="527">527</span>
<span id="528">528</span>
<span id="529">529</span>
<span id="530">530</span>
<span id="531">531</span>
<span id="532">532</span>
<span id="533">533</span>
<span id="534">534</span>
<span id="535">535</span>
<span id="536">536</span>
<span id="537">537</span>
<span id="538">538</span>
<span id="539">539</span>
<span id="540">540</span>
<span id="541">541</span>
<span id="542">542</span>
<span id="543">543</span>
<span id="544">544</span>
<span id="545">545</span>
<span id="546">546</span>
<span id="547">547</span>
<span id="548">548</span>
<span id="549">549</span>
<span id="550">550</span>
<span id="551">551</span>
<span id="552">552</span>
<span id="553">553</span>
<span id="554">554</span>
<span id="555">555</span>
<span id="556">556</span>
<span id="557">557</span>
<span id="558">558</span>
<span id="559">559</span>
<span id="560">560</span>
<span id="561">561</span>
<span id="562">562</span>
<span id="563">563</span>
<span id="564">564</span>
<span id="565">565</span>
<span id="566">566</span>
<span id="567">567</span>
<span id="568">568</span>
<span id="569">569</span>
<span id="570">570</span>
<span id="571">571</span>
<span id="572">572</span>
<span id="573">573</span>
<span id="574">574</span>
<span id="575">575</span>
<span id="576">576</span>
<span id="577">577</span>
<span id="578">578</span>
<span id="579">579</span>
<span id="580">580</span>
<span id="581">581</span>
<span id="582">582</span>
<span id="583">583</span>
<span id="584">584</span>
<span id="585">585</span>
<span id="586">586</span>
<span id="587">587</span>
<span id="588">588</span>
<span id="589">589</span>
<span id="590">590</span>
<span id="591">591</span>
<span id="592">592</span>
<span id="593">593</span>
<span id="594">594</span>
<span id="595">595</span>
<span id="596">596</span>
<span id="597">597</span>
<span id="598">598</span>
<span id="599">599</span>
<span id="600">600</span>
<span id="601">601</span>
<span id="602">602</span>
<span id="603">603</span>
<span id="604">604</span>
<span id="605">605</span>
<span id="606">606</span>
<span id="607">607</span>
<span id="608">608</span>
<span id="609">609</span>
<span id="610">610</span>
<span id="611">611</span>
<span id="612">612</span>
<span id="613">613</span>
<span id="614">614</span>
<span id="615">615</span>
<span id="616">616</span>
<span id="617">617</span>
<span id="618">618</span>
<span id="619">619</span>
<span id="620">620</span>
<span id="621">621</span>
<span id="622">622</span>
<span id="623">623</span>
<span id="624">624</span>
<span id="625">625</span>
<span id="626">626</span>
<span id="627">627</span>
<span id="628">628</span>
<span id="629">629</span>
<span id="630">630</span>
<span id="631">631</span>
<span id="632">632</span>
<span id="633">633</span>
<span id="634">634</span>
<span id="635">635</span>
<span id="636">636</span>
<span id="637">637</span>
<span id="638">638</span>
<span id="639">639</span>
<span id="640">640</span>
<span id="641">641</span>
<span id="642">642</span>
<span id="643">643</span>
<span id="644">644</span>
<span id="645">645</span>
<span id="646">646</span>
<span id="647">647</span>
<span id="648">648</span>
<span id="649">649</span>
<span id="650">650</span>
<span id="651">651</span>
<span id="652">652</span>
<span id="653">653</span>
<span id="654">654</span>
<span id="655">655</span>
<span id="656">656</span>
<span id="657">657</span>
<span id="658">658</span>
<span id="659">659</span>
<span id="660">660</span>
<span id="661">661</span>
<span id="662">662</span>
<span id="663">663</span>
<span id="664">664</span>
<span id="665">665</span>
<span id="666">666</span>
<span id="667">667</span>
<span id="668">668</span>
<span id="669">669</span>
<span id="670">670</span>
<span id="671">671</span>
<span id="672">672</span>
<span id="673">673</span>
<span id="674">674</span>
<span id="675">675</span>
<span id="676">676</span>
<span id="677">677</span>
<span id="678">678</span>
<span id="679">679</span>
<span id="680">680</span>
<span id="681">681</span>
<span id="682">682</span>
<span id="683">683</span>
<span id="684">684</span>
<span id="685">685</span>
<span id="686">686</span>
<span id="687">687</span>
<span id="688">688</span>
<span id="689">689</span>
<span id="690">690</span>
<span id="691">691</span>
<span id="692">692</span>
<span id="693">693</span>
<span id="694">694</span>
<span id="695">695</span>
<span id="696">696</span>
<span id="697">697</span>
<span id="698">698</span>
<span id="699">699</span>
<span id="700">700</span>
<span id="701">701</span>
<span id="702">702</span>
<span id="703">703</span>
<span id="704">704</span>
<span id="705">705</span>
<span id="706">706</span>
<span id="707">707</span>
<span id="708">708</span>
<span id="709">709</span>
<span id="710">710</span>
<span id="711">711</span>
<span id="712">712</span>
<span id="713">713</span>
<span id="714">714</span>
<span id="715">715</span>
<span id="716">716</span>
<span id="717">717</span>
<span id="718">718</span>
<span id="719">719</span>
<span id="720">720</span>
<span id="721">721</span>
<span id="722">722</span>
<span id="723">723</span>
<span id="724">724</span>
<span id="725">725</span>
<span id="726">726</span>
<span id="727">727</span>
<span id="728">728</span>
<span id="729">729</span>
<span id="730">730</span>
<span id="731">731</span>
<span id="732">732</span>
<span id="733">733</span>
<span id="734">734</span>
<span id="735">735</span>
<span id="736">736</span>
<span id="737">737</span>
<span id="738">738</span>
<span id="739">739</span>
<span id="740">740</span>
<span id="741">741</span>
<span id="742">742</span>
<span id="743">743</span>
<span id="744">744</span>
<span id="745">745</span>
<span id="746">746</span>
<span id="747">747</span>
<span id="748">748</span>
<span id="749">749</span>
<span id="750">750</span>
<span id="751">751</span>
<span id="752">752</span>
<span id="753">753</span>
<span id="754">754</span>
<span id="755">755</span>
<span id="756">756</span>
<span id="757">757</span>
<span id="758">758</span>
<span id="759">759</span>
<span id="760">760</span>
<span id="761">761</span>
<span id="762">762</span>
<span id="763">763</span>
<span id="764">764</span>
<span id="765">765</span>
<span id="766">766</span>
<span id="767">767</span>
<span id="768">768</span>
<span id="769">769</span>
<span id="770">770</span>
<span id="771">771</span>
<span id="772">772</span>
<span id="773">773</span>
<span id="774">774</span>
<span id="775">775</span>
<span id="776">776</span>
<span id="777">777</span>
<span id="778">778</span>
<span id="779">779</span>
<span id="780">780</span>
<span id="781">781</span>
<span id="782">782</span>
<span id="783">783</span>
<span id="784">784</span>
<span id="785">785</span>
<span id="786">786</span>
<span id="787">787</span>
<span id="788">788</span>
<span id="789">789</span>
<span id="790">790</span>
<span id="791">791</span>
<span id="792">792</span>
<span id="793">793</span>
<span id="794">794</span>
<span id="795">795</span>
<span id="796">796</span>
<span id="797">797</span>
<span id="798">798</span>
<span id="799">799</span>
<span id="800">800</span>
<span id="801">801</span>
<span id="802">802</span>
<span id="803">803</span>
<span id="804">804</span>
<span id="805">805</span>
<span id="806">806</span>
<span id="807">807</span>
<span id="808">808</span>
<span id="809">809</span>
<span id="810">810</span>
<span id="811">811</span>
<span id="812">812</span>
<span id="813">813</span>
<span id="814">814</span>
<span id="815">815</span>
<span id="816">816</span>
<span id="817">817</span>
<span id="818">818</span>
<span id="819">819</span>
<span id="820">820</span>
<span id="821">821</span>
<span id="822">822</span>
<span id="823">823</span>
<span id="824">824</span>
<span id="825">825</span>
<span id="826">826</span>
<span id="827">827</span>
<span id="828">828</span>
<span id="829">829</span>
<span id="830">830</span>
<span id="831">831</span>
<span id="832">832</span>
<span id="833">833</span>
<span id="834">834</span>
<span id="835">835</span>
<span id="836">836</span>
<span id="837">837</span>
<span id="838">838</span>
<span id="839">839</span>
<span id="840">840</span>
<span id="841">841</span>
<span id="842">842</span>
<span id="843">843</span>
<span id="844">844</span>
<span id="845">845</span>
<span id="846">846</span>
<span id="847">847</span>
<span id="848">848</span>
<span id="849">849</span>
<span id="850">850</span>
<span id="851">851</span>
<span id="852">852</span>
<span id="853">853</span>
<span id="854">854</span>
<span id="855">855</span>
<span id="856">856</span>
<span id="857">857</span>
<span id="858">858</span>
<span id="859">859</span>
<span id="860">860</span>
<span id="861">861</span>
<span id="862">862</span>
<span id="863">863</span>
<span id="864">864</span>
<span id="865">865</span>
<span id="866">866</span>
<span id="867">867</span>
<span id="868">868</span>
<span id="869">869</span>
<span id="870">870</span>
<span id="871">871</span>
<span id="872">872</span>
<span id="873">873</span>
<span id="874">874</span>
<span id="875">875</span>
<span id="876">876</span>
<span id="877">877</span>
<span id="878">878</span>
<span id="879">879</span>
<span id="880">880</span>
<span id="881">881</span>
<span id="882">882</span>
<span id="883">883</span>
<span id="884">884</span>
<span id="885">885</span>
<span id="886">886</span>
<span id="887">887</span>
<span id="888">888</span>
<span id="889">889</span>
<span id="890">890</span>
<span id="891">891</span>
<span id="892">892</span>
<span id="893">893</span>
<span id="894">894</span>
<span id="895">895</span>
<span id="896">896</span>
<span id="897">897</span>
<span id="898">898</span>
<span id="899">899</span>
<span id="900">900</span>
<span id="901">901</span>
<span id="902">902</span>
<span id="903">903</span>
<span id="904">904</span>
<span id="905">905</span>
<span id="906">906</span>
<span id="907">907</span>
<span id="908">908</span>
<span id="909">909</span>
<span id="910">910</span>
<span id="911">911</span>
<span id="912">912</span>
<span id="913">913</span>
<span id="914">914</span>
<span id="915">915</span>
<span id="916">916</span>
<span id="917">917</span>
<span id="918">918</span>
<span id="919">919</span>
<span id="920">920</span>
<span id="921">921</span>
<span id="922">922</span>
<span id="923">923</span>
<span id="924">924</span>
<span id="925">925</span>
<span id="926">926</span>
<span id="927">927</span>
<span id="928">928</span>
<span id="929">929</span>
<span id="930">930</span>
<span id="931">931</span>
<span id="932">932</span>
<span id="933">933</span>
<span id="934">934</span>
<span id="935">935</span>
<span id="936">936</span>
<span id="937">937</span>
<span id="938">938</span>
<span id="939">939</span>
<span id="940">940</span>
<span id="941">941</span>
<span id="942">942</span>
<span id="943">943</span>
<span id="944">944</span>
<span id="945">945</span>
<span id="946">946</span>
<span id="947">947</span>
<span id="948">948</span>
<span id="949">949</span>
<span id="950">950</span>
<span id="951">951</span>
<span id="952">952</span>
<span id="953">953</span>
<span id="954">954</span>
<span id="955">955</span>
<span id="956">956</span>
<span id="957">957</span>
<span id="958">958</span>
<span id="959">959</span>
<span id="960">960</span>
<span id="961">961</span>
<span id="962">962</span>
<span id="963">963</span>
<span id="964">964</span>
<span id="965">965</span>
<span id="966">966</span>
<span id="967">967</span>
<span id="968">968</span>
<span id="969">969</span>
<span id="970">970</span>
<span id="971">971</span>
<span id="972">972</span>
<span id="973">973</span>
<span id="974">974</span>
<span id="975">975</span>
<span id="976">976</span>
<span id="977">977</span>
<span id="978">978</span>
<span id="979">979</span>
<span id="980">980</span>
<span id="981">981</span>
<span id="982">982</span>
<span id="983">983</span>
<span id="984">984</span>
<span id="985">985</span>
<span id="986">986</span>
<span id="987">987</span>
<span id="988">988</span>
<span id="989">989</span>
<span id="990">990</span>
<span id="991">991</span>
<span id="992">992</span>
<span id="993">993</span>
<span id="994">994</span>
<span id="995">995</span>
<span id="996">996</span>
<span id="997">997</span>
<span id="998">998</span>
<span id="999">999</span>
<span id="1000">1000</span>
<span id="1001">1001</span>
<span id="1002">1002</span>
<span id="1003">1003</span>
<span id="1004">1004</span>
<span id="1005">1005</span>
<span id="1006">1006</span>
<span id="1007">1007</span>
<span id="1008">1008</span>
<span id="1009">1009</span>
<span id="1010">1010</span>
<span id="1011">1011</span>
<span id="1012">1012</span>
<span id="1013">1013</span>
<span id="1014">1014</span>
<span id="1015">1015</span>
<span id="1016">1016</span>
<span id="1017">1017</span>
<span id="1018">1018</span>
<span id="1019">1019</span>
<span id="1020">1020</span>
<span id="1021">1021</span>
<span id="1022">1022</span>
<span id="1023">1023</span>
<span id="1024">1024</span>
<span id="1025">1025</span>
<span id="1026">1026</span>
<span id="1027">1027</span>
<span id="1028">1028</span>
<span id="1029">1029</span>
<span id="1030">1030</span>
<span id="1031">1031</span>
<span id="1032">1032</span>
<span id="1033">1033</span>
<span id="1034">1034</span>
<span id="1035">1035</span>
<span id="1036">1036</span>
<span id="1037">1037</span>
<span id="1038">1038</span>
<span id="1039">1039</span>
<span id="1040">1040</span>
<span id="1041">1041</span>
<span id="1042">1042</span>
<span id="1043">1043</span>
<span id="1044">1044</span>
<span id="1045">1045</span>
<span id="1046">1046</span>
<span id="1047">1047</span>
<span id="1048">1048</span>
<span id="1049">1049</span>
<span id="1050">1050</span>
<span id="1051">1051</span>
<span id="1052">1052</span>
<span id="1053">1053</span>
<span id="1054">1054</span>
<span id="1055">1055</span>
<span id="1056">1056</span>
<span id="1057">1057</span>
<span id="1058">1058</span>
<span id="1059">1059</span>
<span id="1060">1060</span>
<span id="1061">1061</span>
<span id="1062">1062</span>
<span id="1063">1063</span>
<span id="1064">1064</span>
<span id="1065">1065</span>
<span id="1066">1066</span>
<span id="1067">1067</span>
<span id="1068">1068</span>
<span id="1069">1069</span>
<span id="1070">1070</span>
<span id="1071">1071</span>
<span id="1072">1072</span>
<span id="1073">1073</span>
<span id="1074">1074</span>
<span id="1075">1075</span>
<span id="1076">1076</span>
<span id="1077">1077</span>
<span id="1078">1078</span>
<span id="1079">1079</span>
<span id="1080">1080</span>
<span id="1081">1081</span>
<span id="1082">1082</span>
<span id="1083">1083</span>
<span id="1084">1084</span>
<span id="1085">1085</span>
<span id="1086">1086</span>
<span id="1087">1087</span>
<span id="1088">1088</span>
<span id="1089">1089</span>
<span id="1090">1090</span>
<span id="1091">1091</span>
<span id="1092">1092</span>
<span id="1093">1093</span>
<span id="1094">1094</span>
<span id="1095">1095</span>
<span id="1096">1096</span>
<span id="1097">1097</span>
<span id="1098">1098</span>
<span id="1099">1099</span>
<span id="1100">1100</span>
<span id="1101">1101</span>
<span id="1102">1102</span>
<span id="1103">1103</span>
<span id="1104">1104</span>
<span id="1105">1105</span>
<span id="1106">1106</span>
<span id="1107">1107</span>
<span id="1108">1108</span>
<span id="1109">1109</span>
<span id="1110">1110</span>
<span id="1111">1111</span>
<span id="1112">1112</span>
<span id="1113">1113</span>
<span id="1114">1114</span>
<span id="1115">1115</span>
<span id="1116">1116</span>
<span id="1117">1117</span>
<span id="1118">1118</span>
<span id="1119">1119</span>
<span id="1120">1120</span>
<span id="1121">1121</span>
<span id="1122">1122</span>
<span id="1123">1123</span>
<span id="1124">1124</span>
<span id="1125">1125</span>
<span id="1126">1126</span>
<span id="1127">1127</span>
<span id="1128">1128</span>
<span id="1129">1129</span>
<span id="1130">1130</span>
<span id="1131">1131</span>
<span id="1132">1132</span>
<span id="1133">1133</span>
<span id="1134">1134</span>
<span id="1135">1135</span>
<span id="1136">1136</span>
<span id="1137">1137</span>
<span id="1138">1138</span>
<span id="1139">1139</span>
<span id="1140">1140</span>
<span id="1141">1141</span>
<span id="1142">1142</span>
<span id="1143">1143</span>
<span id="1144">1144</span>
<span id="1145">1145</span>
<span id="1146">1146</span>
<span id="1147">1147</span>
<span id="1148">1148</span>
<span id="1149">1149</span>
<span id="1150">1150</span>
<span id="1151">1151</span>
<span id="1152">1152</span>
<span id="1153">1153</span>
<span id="1154">1154</span>
<span id="1155">1155</span>
<span id="1156">1156</span>
<span id="1157">1157</span>
<span id="1158">1158</span>
<span id="1159">1159</span>
<span id="1160">1160</span>
<span id="1161">1161</span>
<span id="1162">1162</span>
<span id="1163">1163</span>
<span id="1164">1164</span>
<span id="1165">1165</span>
<span id="1166">1166</span>
<span id="1167">1167</span>
<span id="1168">1168</span>
<span id="1169">1169</span>
<span id="1170">1170</span>
<span id="1171">1171</span>
<span id="1172">1172</span>
<span id="1173">1173</span>
<span id="1174">1174</span>
<span id="1175">1175</span>
<span id="1176">1176</span>
<span id="1177">1177</span>
<span id="1178">1178</span>
<span id="1179">1179</span>
<span id="1180">1180</span>
<span id="1181">1181</span>
<span id="1182">1182</span>
<span id="1183">1183</span>
<span id="1184">1184</span>
<span id="1185">1185</span>
<span id="1186">1186</span>
<span id="1187">1187</span>
<span id="1188">1188</span>
<span id="1189">1189</span>
<span id="1190">1190</span>
<span id="1191">1191</span>
<span id="1192">1192</span>
<span id="1193">1193</span>
<span id="1194">1194</span>
<span id="1195">1195</span>
<span id="1196">1196</span>
<span id="1197">1197</span>
<span id="1198">1198</span>
<span id="1199">1199</span>
<span id="1200">1200</span>
<span id="1201">1201</span>
<span id="1202">1202</span>
<span id="1203">1203</span>
<span id="1204">1204</span>
<span id="1205">1205</span>
<span id="1206">1206</span>
<span id="1207">1207</span>
<span id="1208">1208</span>
<span id="1209">1209</span>
<span id="1210">1210</span>
<span id="1211">1211</span>
<span id="1212">1212</span>
<span id="1213">1213</span>
<span id="1214">1214</span>
<span id="1215">1215</span>
<span id="1216">1216</span>
<span id="1217">1217</span>
<span id="1218">1218</span>
<span id="1219">1219</span>
<span id="1220">1220</span>
<span id="1221">1221</span>
<span id="1222">1222</span>
<span id="1223">1223</span>
<span id="1224">1224</span>
<span id="1225">1225</span>
<span id="1226">1226</span>
<span id="1227">1227</span>
<span id="1228">1228</span>
<span id="1229">1229</span>
<span id="1230">1230</span>
<span id="1231">1231</span>
<span id="1232">1232</span>
<span id="1233">1233</span>
<span id="1234">1234</span>
<span id="1235">1235</span>
<span id="1236">1236</span>
<span id="1237">1237</span>
<span id="1238">1238</span>
<span id="1239">1239</span>
<span id="1240">1240</span>
<span id="1241">1241</span>
<span id="1242">1242</span>
<span id="1243">1243</span>
<span id="1244">1244</span>
<span id="1245">1245</span>
<span id="1246">1246</span>
<span id="1247">1247</span>
<span id="1248">1248</span>
<span id="1249">1249</span>
<span id="1250">1250</span>
<span id="1251">1251</span>
<span id="1252">1252</span>
<span id="1253">1253</span>
<span id="1254">1254</span>
<span id="1255">1255</span>
<span id="1256">1256</span>
<span id="1257">1257</span>
<span id="1258">1258</span>
<span id="1259">1259</span>
<span id="1260">1260</span>
<span id="1261">1261</span>
<span id="1262">1262</span>
<span id="1263">1263</span>
<span id="1264">1264</span>
<span id="1265">1265</span>
<span id="1266">1266</span>
<span id="1267">1267</span>
<span id="1268">1268</span>
<span id="1269">1269</span>
<span id="1270">1270</span>
<span id="1271">1271</span>
<span id="1272">1272</span>
<span id="1273">1273</span>
<span id="1274">1274</span>
<span id="1275">1275</span>
<span id="1276">1276</span>
<span id="1277">1277</span>
<span id="1278">1278</span>
<span id="1279">1279</span>
<span id="1280">1280</span>
<span id="1281">1281</span>
<span id="1282">1282</span>
<span id="1283">1283</span>
<span id="1284">1284</span>
<span id="1285">1285</span>
<span id="1286">1286</span>
<span id="1287">1287</span>
<span id="1288">1288</span>
<span id="1289">1289</span>
<span id="1290">1290</span>
<span id="1291">1291</span>
<span id="1292">1292</span>
<span id="1293">1293</span>
<span id="1294">1294</span>
<span id="1295">1295</span>
<span id="1296">1296</span>
<span id="1297">1297</span>
<span id="1298">1298</span>
<span id="1299">1299</span>
<span id="1300">1300</span>
<span id="1301">1301</span>
<span id="1302">1302</span>
<span id="1303">1303</span>
<span id="1304">1304</span>
<span id="1305">1305</span>
<span id="1306">1306</span>
<span id="1307">1307</span>
<span id="1308">1308</span>
<span id="1309">1309</span>
<span id="1310">1310</span>
<span id="1311">1311</span>
<span id="1312">1312</span>
<span id="1313">1313</span>
<span id="1314">1314</span>
<span id="1315">1315</span>
<span id="1316">1316</span>
<span id="1317">1317</span>
<span id="1318">1318</span>
<span id="1319">1319</span>
<span id="1320">1320</span>
<span id="1321">1321</span>
<span id="1322">1322</span>
<span id="1323">1323</span>
<span id="1324">1324</span>
<span id="1325">1325</span>
<span id="1326">1326</span>
<span id="1327">1327</span>
<span id="1328">1328</span>
<span id="1329">1329</span>
<span id="1330">1330</span>
<span id="1331">1331</span>
<span id="1332">1332</span>
<span id="1333">1333</span>
<span id="1334">1334</span>
<span id="1335">1335</span>
<span id="1336">1336</span>
<span id="1337">1337</span>
<span id="1338">1338</span>
<span id="1339">1339</span>
<span id="1340">1340</span>
<span id="1341">1341</span>
<span id="1342">1342</span>
<span id="1343">1343</span>
<span id="1344">1344</span>
<span id="1345">1345</span>
<span id="1346">1346</span>
<span id="1347">1347</span>
<span id="1348">1348</span>
<span id="1349">1349</span>
<span id="1350">1350</span>
<span id="1351">1351</span>
<span id="1352">1352</span>
<span id="1353">1353</span>
<span id="1354">1354</span>
<span id="1355">1355</span>
<span id="1356">1356</span>
<span id="1357">1357</span>
<span id="1358">1358</span>
<span id="1359">1359</span>
<span id="1360">1360</span>
<span id="1361">1361</span>
<span id="1362">1362</span>
<span id="1363">1363</span>
<span id="1364">1364</span>
<span id="1365">1365</span>
<span id="1366">1366</span>
<span id="1367">1367</span>
<span id="1368">1368</span>
<span id="1369">1369</span>
<span id="1370">1370</span>
<span id="1371">1371</span>
<span id="1372">1372</span>
<span id="1373">1373</span>
<span id="1374">1374</span>
<span id="1375">1375</span>
<span id="1376">1376</span>
<span id="1377">1377</span>
<span id="1378">1378</span>
<span id="1379">1379</span>
<span id="1380">1380</span>
<span id="1381">1381</span>
<span id="1382">1382</span>
<span id="1383">1383</span>
<span id="1384">1384</span>
<span id="1385">1385</span>
<span id="1386">1386</span>
<span id="1387">1387</span>
<span id="1388">1388</span>
<span id="1389">1389</span>
<span id="1390">1390</span>
<span id="1391">1391</span>
<span id="1392">1392</span>
<span id="1393">1393</span>
<span id="1394">1394</span>
<span id="1395">1395</span>
<span id="1396">1396</span>
<span id="1397">1397</span>
<span id="1398">1398</span>
<span id="1399">1399</span>
<span id="1400">1400</span>
<span id="1401">1401</span>
<span id="1402">1402</span>
<span id="1403">1403</span>
<span id="1404">1404</span>
<span id="1405">1405</span>
<span id="1406">1406</span>
<span id="1407">1407</span>
<span id="1408">1408</span>
<span id="1409">1409</span>
<span id="1410">1410</span>
<span id="1411">1411</span>
<span id="1412">1412</span>
<span id="1413">1413</span>
<span id="1414">1414</span>
<span id="1415">1415</span>
<span id="1416">1416</span>
<span id="1417">1417</span>
<span id="1418">1418</span>
<span id="1419">1419</span>
<span id="1420">1420</span>
<span id="1421">1421</span>
<span id="1422">1422</span>
<span id="1423">1423</span>
<span id="1424">1424</span>
<span id="1425">1425</span>
<span id="1426">1426</span>
<span id="1427">1427</span>
<span id="1428">1428</span>
<span id="1429">1429</span>
<span id="1430">1430</span>
<span id="1431">1431</span>
<span id="1432">1432</span>
<span id="1433">1433</span>
<span id="1434">1434</span>
<span id="1435">1435</span>
<span id="1436">1436</span>
<span id="1437">1437</span>
<span id="1438">1438</span>
<span id="1439">1439</span>
<span id="1440">1440</span>
<span id="1441">1441</span>
<span id="1442">1442</span>
<span id="1443">1443</span>
<span id="1444">1444</span>
<span id="1445">1445</span>
<span id="1446">1446</span>
<span id="1447">1447</span>
<span id="1448">1448</span>
<span id="1449">1449</span>
<span id="1450">1450</span>
<span id="1451">1451</span>
<span id="1452">1452</span>
<span id="1453">1453</span>
<span id="1454">1454</span>
<span id="1455">1455</span>
<span id="1456">1456</span>
<span id="1457">1457</span>
<span id="1458">1458</span>
<span id="1459">1459</span>
<span id="1460">1460</span>
<span id="1461">1461</span>
<span id="1462">1462</span>
<span id="1463">1463</span>
<span id="1464">1464</span>
<span id="1465">1465</span>
<span id="1466">1466</span>
<span id="1467">1467</span>
<span id="1468">1468</span>
<span id="1469">1469</span>
<span id="1470">1470</span>
<span id="1471">1471</span>
<span id="1472">1472</span>
<span id="1473">1473</span>
<span id="1474">1474</span>
<span id="1475">1475</span>
<span id="1476">1476</span>
<span id="1477">1477</span>
<span id="1478">1478</span>
<span id="1479">1479</span>
<span id="1480">1480</span>
<span id="1481">1481</span>
<span id="1482">1482</span>
<span id="1483">1483</span>
<span id="1484">1484</span>
<span id="1485">1485</span>
<span id="1486">1486</span>
<span id="1487">1487</span>
<span id="1488">1488</span>
<span id="1489">1489</span>
<span id="1490">1490</span>
<span id="1491">1491</span>
<span id="1492">1492</span>
<span id="1493">1493</span>
<span id="1494">1494</span>
<span id="1495">1495</span>
<span id="1496">1496</span>
<span id="1497">1497</span>
<span id="1498">1498</span>
<span id="1499">1499</span>
<span id="1500">1500</span>
<span id="1501">1501</span>
<span id="1502">1502</span>
<span id="1503">1503</span>
<span id="1504">1504</span>
<span id="1505">1505</span>
<span id="1506">1506</span>
<span id="1507">1507</span>
<span id="1508">1508</span>
<span id="1509">1509</span>
<span id="1510">1510</span>
</pre><pre class="rust"><code><span class="comment">// Copyright 2018-2022 Parity Technologies (UK) Ltd.</span>
<span class="comment">//</span>
<span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="comment">// you may not use this file except in compliance with the License.</span>
<span class="comment">// You may obtain a copy of the License at</span>
<span class="comment">//</span>
<span class="comment">//     http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="comment">//</span>
<span class="comment">// Unless required by applicable law or agreed to in writing, software</span>
<span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="comment">// See the License for the specific language governing permissions and</span>
<span class="comment">// limitations under the License.</span>

<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">proc_macro</span>;

<span class="kw">mod</span> <span class="ident">blake2b</span>;
<span class="kw">mod</span> <span class="ident">chain_extension</span>;
<span class="kw">mod</span> <span class="ident">contract</span>;
<span class="kw">mod</span> <span class="ident">ink_e2e_test</span>;
<span class="kw">mod</span> <span class="ident">ink_test</span>;
<span class="kw">mod</span> <span class="ident">selector</span>;
<span class="kw">mod</span> <span class="ident">storage</span>;
<span class="kw">mod</span> <span class="ident">storage_item</span>;
<span class="kw">mod</span> <span class="ident">trait_def</span>;

<span class="kw">use</span> <span class="ident">proc_macro::TokenStream</span>;

<span class="doccomment">/// Computes and expands into the BLAKE2b 256-bit hash of the string input.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Note</span>
<span class="doccomment">///</span>
<span class="doccomment">/// - The computation takes place at compilation time of the crate.</span>
<span class="doccomment">/// - The returned value is of type `[u8; 32]`.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Example</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// # use ink_macro::blake2x256;</span>
<span class="doccomment">/// # use ink_ir::blake2b_256;</span>
<span class="doccomment">/// assert_eq!(</span>
<span class="doccomment">///     blake2x256!(&quot;hello&quot;),</span>
<span class="doccomment">///     {</span>
<span class="doccomment">///         let mut output = [0u8; 32];</span>
<span class="doccomment">///         blake2b_256(b&quot;hello&quot;, &amp;mut output);</span>
<span class="doccomment">///         output</span>
<span class="doccomment">///     }</span>
<span class="doccomment">/// );</span>
<span class="doccomment">/// ```</span>
<span class="attribute">#[<span class="ident">proc_macro</span>]</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">blake2x256</span>(<span class="ident">input</span>: <span class="ident">TokenStream</span>) -&gt; <span class="ident">TokenStream</span> {
    <span class="ident">blake2b::generate_blake2x256_hash</span>(<span class="ident">input</span>.<span class="ident">into</span>()).<span class="ident">into</span>()
}

<span class="doccomment">/// Computes the ink! selector of the string and expands into its `u32` representation.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Note</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The computation takes place at compilation time of the crate.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Example</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// # use ink_macro::selector_id;</span>
<span class="doccomment">/// assert_eq!(</span>
<span class="doccomment">///     selector_id!(&quot;hello&quot;),</span>
<span class="doccomment">///     843960066,</span>
<span class="doccomment">/// );</span>
<span class="doccomment">/// ```</span>
<span class="attribute">#[<span class="ident">proc_macro</span>]</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">selector_id</span>(<span class="ident">input</span>: <span class="ident">TokenStream</span>) -&gt; <span class="ident">TokenStream</span> {
    <span class="ident">selector::generate_selector_id</span>(<span class="ident">input</span>.<span class="ident">into</span>()).<span class="ident">into</span>()
}

<span class="doccomment">/// Computes the ink! selector of the string and expands into its byte representation.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Note</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The computation takes place at compilation time of the crate.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Example</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// # use ink_macro::selector_bytes;</span>
<span class="doccomment">/// assert_eq!(</span>
<span class="doccomment">///     selector_bytes!(&quot;hello&quot;),</span>
<span class="doccomment">///     [50, 77, 207, 2],</span>
<span class="doccomment">/// );</span>
<span class="doccomment">/// ```</span>
<span class="attribute">#[<span class="ident">proc_macro</span>]</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">selector_bytes</span>(<span class="ident">input</span>: <span class="ident">TokenStream</span>) -&gt; <span class="ident">TokenStream</span> {
    <span class="ident">selector::generate_selector_bytes</span>(<span class="ident">input</span>.<span class="ident">into</span>()).<span class="ident">into</span>()
}

<span class="doccomment">/// Entry point for writing ink! smart contracts.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// If you are a beginner trying to learn ink! we recommend you to check out</span>
<span class="doccomment">/// our extensive [ink! workshop](https://docs.substrate.io/tutorials/v3/ink-workshop/pt1).</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Description</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The macro does analysis on the provided smart contract code and generates</span>
<span class="doccomment">/// proper code.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ink! smart contracts can compile in several different modes.</span>
<span class="doccomment">/// There are two main compilation models using either</span>
<span class="doccomment">/// - on-chain mode: `no_std` and WebAssembly as target</span>
<span class="doccomment">/// - off-chain mode: `std`</span>
<span class="doccomment">///</span>
<span class="doccomment">/// We generally use the on-chain mode for actual smart contract instantiation</span>
<span class="doccomment">/// whereas we use the off-chain mode for smart contract testing using the</span>
<span class="doccomment">/// off-chain environment provided by the `ink_env` crate.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Usage</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ## Header Arguments</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The `#[ink::contract]` macro can be provided with some additional comma-separated</span>
<span class="doccomment">/// header arguments:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// - `keep_attr: String`</span>
<span class="doccomment">///</span>
<span class="doccomment">///     Tells the ink! code generator which attributes should be passed to call builders.</span>
<span class="doccomment">///     Call builders are used to doing cross-contract calls and are automatically</span>
<span class="doccomment">///     generated for contracts.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Usage Example:**</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///     #[ink::contract(keep_attr = &quot;foo, bar&quot;)]</span>
<span class="doccomment">///     mod my_contract {</span>
<span class="doccomment">///         # #[ink(storage)]</span>
<span class="doccomment">///         # pub struct MyStorage;</span>
<span class="doccomment">///         # impl MyStorage {</span>
<span class="doccomment">///         #     #[ink(constructor)]</span>
<span class="doccomment">///         //    #[bar]</span>
<span class="doccomment">///         #     pub fn construct() -&gt; Self { MyStorage {} }</span>
<span class="doccomment">///         #     #[ink(message)]</span>
<span class="doccomment">///         //    #[foo]</span>
<span class="doccomment">///         #     pub fn message(&amp;self) {}</span>
<span class="doccomment">///         # }</span>
<span class="doccomment">///         // ...</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Allowed attributes by default:** `cfg`, `cfg_attr`, `allow`, `warn`, `deny`, `forbid`,</span>
<span class="doccomment">///         `deprecated`, `must_use`, `doc`, `rustfmt`.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// - `env: impl Environment`</span>
<span class="doccomment">///</span>
<span class="doccomment">///     Tells the ink! code generator which environment to use for the ink! smart contract.</span>
<span class="doccomment">///     The environment must implement the `Environment` (defined in `ink_env`) trait and provides</span>
<span class="doccomment">///     all the necessary fundamental type definitions for `Balance`, `AccountId` etc.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     When using a custom `Environment` implementation for a smart contract all types</span>
<span class="doccomment">///     that it exposes to the ink! smart contract and the mirrored types used in the runtime</span>
<span class="doccomment">///     must be aligned with respect to SCALE encoding and semantics.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Usage Example:**</span>
<span class="doccomment">///</span>
<span class="doccomment">///     Given a custom `Environment` implementation:</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///     pub struct MyEnvironment;</span>
<span class="doccomment">///</span>
<span class="doccomment">///     impl ink_env::Environment for MyEnvironment {</span>
<span class="doccomment">///         const MAX_EVENT_TOPICS: usize = 3;</span>
<span class="doccomment">///         type AccountId = [u8; 16];</span>
<span class="doccomment">///         type Balance = u128;</span>
<span class="doccomment">///         type Hash = [u8; 32];</span>
<span class="doccomment">///         type Timestamp = u64;</span>
<span class="doccomment">///         type BlockNumber = u32;</span>
<span class="doccomment">///         type ChainExtension = ::ink::env::NoChainExtension;</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///     A user might implement their ink! smart contract using the above custom `Environment`</span>
<span class="doccomment">///     implementation as demonstrated below:</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///     #[ink::contract(env = MyEnvironment)]</span>
<span class="doccomment">///     mod my_contract {</span>
<span class="doccomment">///         # pub struct MyEnvironment;</span>
<span class="doccomment">///         #</span>
<span class="doccomment">///         # impl ink_env::Environment for MyEnvironment {</span>
<span class="doccomment">///         #     const MAX_EVENT_TOPICS: usize = 3;</span>
<span class="doccomment">///         #     type AccountId = [u8; 16];</span>
<span class="doccomment">///         #     type Balance = u128;</span>
<span class="doccomment">///         #     type Hash = [u8; 32];</span>
<span class="doccomment">///         #     type Timestamp = u64;</span>
<span class="doccomment">///         #     type BlockNumber = u32;</span>
<span class="doccomment">///         #     type ChainExtension = ::ink::env::NoChainExtension;</span>
<span class="doccomment">///         # }</span>
<span class="doccomment">///         #</span>
<span class="doccomment">///         # #[ink(storage)]</span>
<span class="doccomment">///         # pub struct MyStorage;</span>
<span class="doccomment">///         # impl MyStorage {</span>
<span class="doccomment">///         #     #[ink(constructor)]</span>
<span class="doccomment">///         #     pub fn construct() -&gt; Self { MyStorage {} }</span>
<span class="doccomment">///         #     #[ink(message)]</span>
<span class="doccomment">///         #     pub fn message(&amp;self) {}</span>
<span class="doccomment">///         # }</span>
<span class="doccomment">///         // ...</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Default value:** `DefaultEnvironment` defined in `ink_env` crate.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ## Analysis</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The `#[ink::contract]` macro fully analyses its input smart contract</span>
<span class="doccomment">/// against invalid arguments and structure.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Some example rules include but are not limited to:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// - There must be exactly one `#[ink(storage)]` struct.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     This struct defines the layout of the storage that the ink! smart contract operates on.</span>
<span class="doccomment">///     The user is able to use a variety of built-in facilities, combine them in various ways</span>
<span class="doccomment">///     or even provide their own implementations of storage data structures.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     For more information visit the `ink::storage` crate documentation.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Example:**</span>
<span class="doccomment">///</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///     #[ink::contract]</span>
<span class="doccomment">///     mod flipper {</span>
<span class="doccomment">///         #[ink(storage)]</span>
<span class="doccomment">///         pub struct Flipper {</span>
<span class="doccomment">///             value: bool,</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///         # impl Flipper {</span>
<span class="doccomment">///         #     #[ink(constructor)]</span>
<span class="doccomment">///         #     pub fn construct() -&gt; Self { Flipper { value: false } }</span>
<span class="doccomment">///         #     #[ink(message)]</span>
<span class="doccomment">///         #     pub fn message(&amp;self) {}</span>
<span class="doccomment">///         # }</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// - There must be at least one `#[ink(constructor)]` defined method.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     Methods flagged with `#[ink(constructor)]` are special in that they are dispatchable</span>
<span class="doccomment">///     upon contract instantiation. A contract may define multiple such constructors which</span>
<span class="doccomment">///     allow users of the contract to instantiate a contract in multiple different ways.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Example:**</span>
<span class="doccomment">///</span>
<span class="doccomment">///     Given the `Flipper` contract definition above we add an `#[ink(constructor)]`</span>
<span class="doccomment">///     as follows:</span>
<span class="doccomment">///</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///     # #[ink::contract]</span>
<span class="doccomment">///     # mod flipper {</span>
<span class="doccomment">///         # #[ink(storage)]</span>
<span class="doccomment">///         # pub struct Flipper {</span>
<span class="doccomment">///         #     value: bool,</span>
<span class="doccomment">///         # }</span>
<span class="doccomment">///     impl Flipper {</span>
<span class="doccomment">///         #[ink(constructor)]</span>
<span class="doccomment">///         pub fn new(initial_value: bool) -&gt; Self {</span>
<span class="doccomment">///             Flipper { value: false }</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///         # #[ink(message)]</span>
<span class="doccomment">///         # pub fn message(&amp;self) {}</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///     # }</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// - There must be at least one `#[ink(message)]` defined method.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     Methods flagged with `#[ink(message)]` are special in that they are dispatchable</span>
<span class="doccomment">///     upon contract invocation. The set of ink! messages defined for an ink! smart contract</span>
<span class="doccomment">///     define its API surface with which users are allowed to interact.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     An ink! smart contract can have multiple such ink! messages defined.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Note:**</span>
<span class="doccomment">///</span>
<span class="doccomment">///     - An ink! message with a `&amp;self` receiver may only read state whereas an ink! message</span>
<span class="doccomment">///       with a `&amp;mut self` receiver may mutate the contract&#39;s storage.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Example:**</span>
<span class="doccomment">///</span>
<span class="doccomment">///     Given the `Flipper` contract definition above we add some `#[ink(message)]` definitions</span>
<span class="doccomment">///     as follows:</span>
<span class="doccomment">///</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///     # #[ink::contract]</span>
<span class="doccomment">///     # mod flipper {</span>
<span class="doccomment">///         # #[ink(storage)]</span>
<span class="doccomment">///         # pub struct Flipper {</span>
<span class="doccomment">///         #     value: bool,</span>
<span class="doccomment">///         # }</span>
<span class="doccomment">///     impl Flipper {</span>
<span class="doccomment">///         # #[ink(constructor)]</span>
<span class="doccomment">///         # pub fn new(initial_value: bool) -&gt; Self {</span>
<span class="doccomment">///         #     Flipper { value: false }</span>
<span class="doccomment">///         # }</span>
<span class="doccomment">///         /// Flips the current value.</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///         pub fn flip(&amp;mut self) {</span>
<span class="doccomment">///             self.value = !self.value;</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///</span>
<span class="doccomment">///         /// Returns the current value.</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///         pub fn get(&amp;self) -&gt; bool {</span>
<span class="doccomment">///             self.value</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///     # }</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Payable Messages:**</span>
<span class="doccomment">///</span>
<span class="doccomment">///     An ink! message by default will reject calls that additional fund the smart contract.</span>
<span class="doccomment">///     Authors of ink! smart contracts can make an ink! message payable by adding the `payable`</span>
<span class="doccomment">///     flag to it. An example below:</span>
<span class="doccomment">///</span>
<span class="doccomment">///     Note that ink! constructors are always implicitly payable and thus cannot be flagged</span>
<span class="doccomment">///     as such.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///     # #[ink::contract]</span>
<span class="doccomment">///     # mod flipper {</span>
<span class="doccomment">///         # #[ink(storage)]</span>
<span class="doccomment">///         # pub struct Flipper {</span>
<span class="doccomment">///         #     value: bool,</span>
<span class="doccomment">///         # }</span>
<span class="doccomment">///     impl Flipper {</span>
<span class="doccomment">///         # #[ink(constructor)]</span>
<span class="doccomment">///         # pub fn new(initial_value: bool) -&gt; Self {</span>
<span class="doccomment">///         #     Flipper { value: false }</span>
<span class="doccomment">///         # }</span>
<span class="doccomment">///         /// Flips the current value.</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///         #[ink(payable)] // You can either specify payable out-of-line.</span>
<span class="doccomment">///         pub fn flip(&amp;mut self) {</span>
<span class="doccomment">///             self.value = !self.value;</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///</span>
<span class="doccomment">///         /// Returns the current value.</span>
<span class="doccomment">///         #[ink(message, payable)] // ...or specify payable inline.</span>
<span class="doccomment">///         pub fn get(&amp;self) -&gt; bool {</span>
<span class="doccomment">///             self.value</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///     # }</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Controlling the messages selector:**</span>
<span class="doccomment">///</span>
<span class="doccomment">///     Every ink! message and ink! constructor has a unique selector with which the</span>
<span class="doccomment">///     message or constructor can be uniquely identified within the ink! smart contract.</span>
<span class="doccomment">///     These selectors are mainly used to drive the contract&#39;s dispatch upon calling it.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     An ink! smart contract author can control the selector of an ink! message or ink!</span>
<span class="doccomment">///     constructor using the `selector` flag. An example is shown below:</span>
<span class="doccomment">///</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///     # #[ink::contract]</span>
<span class="doccomment">///     # mod flipper {</span>
<span class="doccomment">///         # #[ink(storage)]</span>
<span class="doccomment">///         # pub struct Flipper {</span>
<span class="doccomment">///         #     value: bool,</span>
<span class="doccomment">///         # }</span>
<span class="doccomment">///     impl Flipper {</span>
<span class="doccomment">///         #[ink(constructor)]</span>
<span class="doccomment">///         #[ink(selector = 0xDEADBEEF)] // Works on constructors as well.</span>
<span class="doccomment">///         pub fn new(initial_value: bool) -&gt; Self {</span>
<span class="doccomment">///             Flipper { value: false }</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///</span>
<span class="doccomment">///         # /// Flips the current value.</span>
<span class="doccomment">///         # #[ink(message)]</span>
<span class="doccomment">///         # #[ink(selector = 0xCAFEBABE)] // You can either specify selector out-of-line.</span>
<span class="doccomment">///         # pub fn flip(&amp;mut self) {</span>
<span class="doccomment">///         #     self.value = !self.value;</span>
<span class="doccomment">///         # }</span>
<span class="doccomment">///         #</span>
<span class="doccomment">///         /// Returns the current value.</span>
<span class="doccomment">///         #[ink(message, selector = 0xFEEDBEEF)] // ...or specify selector inline.</span>
<span class="doccomment">///         pub fn get(&amp;self) -&gt; bool {</span>
<span class="doccomment">///             self.value</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///     # }</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ## Interacting with the Contract Executor</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The `ink_env` crate provides facilities to interact with the contract executor that</span>
<span class="doccomment">/// connects ink! smart contracts with the outer world.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// For example it is possible to query the current call&#39;s caller via:</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// # ink_env::test::run_test::&lt;ink_env::DefaultEnvironment, _&gt;(|_| {</span>
<span class="doccomment">/// let caller = ink_env::caller::&lt;ink_env::DefaultEnvironment&gt;();</span>
<span class="doccomment">/// # let _caller = caller;</span>
<span class="doccomment">/// # Ok(())</span>
<span class="doccomment">/// # }).unwrap();</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// However, ink! provides a much simpler way to interact with the contract executor</span>
<span class="doccomment">/// via its environment accessor. An example below:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// #[ink::contract]</span>
<span class="doccomment">/// mod greeter {</span>
<span class="doccomment">///     use ink_env::debug_println;</span>
<span class="doccomment">///</span>
<span class="doccomment">///     #[ink(storage)]</span>
<span class="doccomment">///     pub struct Greeter;</span>
<span class="doccomment">///</span>
<span class="doccomment">///     impl Greeter {</span>
<span class="doccomment">///         #[ink(constructor)]</span>
<span class="doccomment">///         pub fn new() -&gt; Self {</span>
<span class="doccomment">///             let caller = Self::env().caller();</span>
<span class="doccomment">///             debug_println!(&quot;thanks for instantiation {:?}&quot;, caller);</span>
<span class="doccomment">///             Greeter {}</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///</span>
<span class="doccomment">///         #[ink(message, payable)]</span>
<span class="doccomment">///         pub fn fund(&amp;self) {</span>
<span class="doccomment">///             let caller = self.env().caller();</span>
<span class="doccomment">///             let value = self.env().transferred_value();</span>
<span class="doccomment">///             debug_println!(&quot;thanks for the funding of {:?} from {:?}&quot;, value, caller);</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///     }</span>
<span class="doccomment">/// }</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ## Events</span>
<span class="doccomment">///</span>
<span class="doccomment">/// An ink! smart contract may define events that it can emit during contract execution.</span>
<span class="doccomment">/// Emitting events can be used by third party tools to query information about a contract&#39;s</span>
<span class="doccomment">/// execution and state.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The following example ink! contract shows how an event `Transferred` is defined and</span>
<span class="doccomment">/// emitted in the `#[ink(constructor)]`.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// #[ink::contract]</span>
<span class="doccomment">/// mod erc20 {</span>
<span class="doccomment">///     /// Defines an event that is emitted every time value is transferred.</span>
<span class="doccomment">///     #[ink(event)]</span>
<span class="doccomment">///     pub struct Transferred {</span>
<span class="doccomment">///         from: Option&lt;AccountId&gt;,</span>
<span class="doccomment">///         to: Option&lt;AccountId&gt;,</span>
<span class="doccomment">///         value: Balance,</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///</span>
<span class="doccomment">///     #[ink(storage)]</span>
<span class="doccomment">///     pub struct Erc20 {</span>
<span class="doccomment">///         total_supply: Balance,</span>
<span class="doccomment">///         // more fields...</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///</span>
<span class="doccomment">///     impl Erc20 {</span>
<span class="doccomment">///         #[ink(constructor)]</span>
<span class="doccomment">///         pub fn new(initial_supply: Balance) -&gt; Self {</span>
<span class="doccomment">///             let caller = Self::env().caller();</span>
<span class="doccomment">///             Self::env().emit_event(Transferred {</span>
<span class="doccomment">///                 from: None,</span>
<span class="doccomment">///                 to: Some(caller),</span>
<span class="doccomment">///                 value: initial_supply,</span>
<span class="doccomment">///             });</span>
<span class="doccomment">///             Self { total_supply: initial_supply }</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///         pub fn total_supply(&amp;self) -&gt; Balance {</span>
<span class="doccomment">///             self.total_supply</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///     }</span>
<span class="doccomment">/// }</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ## Example: Flipper</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The below code shows the complete implementation of the so-called Flipper</span>
<span class="doccomment">/// ink! smart contract.</span>
<span class="doccomment">/// For us it acts as the &quot;Hello, World!&quot; of the ink! smart contracts because</span>
<span class="doccomment">/// it is minimal while still providing some more or less useful functionality.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// It controls a single `bool` value that can be either `false` or `true`</span>
<span class="doccomment">/// and allows the user to flip this value using the `Flipper::flip` message</span>
<span class="doccomment">/// or retrieve the current value using `Flipper::get`.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// #[ink::contract]</span>
<span class="doccomment">/// pub mod flipper {</span>
<span class="doccomment">///     #[ink(storage)]</span>
<span class="doccomment">///     pub struct Flipper {</span>
<span class="doccomment">///         value: bool,</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///</span>
<span class="doccomment">///     impl Flipper {</span>
<span class="doccomment">///         /// Creates a new flipper smart contract initialized with the given value.</span>
<span class="doccomment">///         #[ink(constructor)]</span>
<span class="doccomment">///         pub fn new(init_value: bool) -&gt; Self {</span>
<span class="doccomment">///             Self { value: init_value }</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///</span>
<span class="doccomment">///         /// Flips the current value of the Flipper&#39;s boolean.</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///         pub fn flip(&amp;mut self) {</span>
<span class="doccomment">///             self.value = !self.value;</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///</span>
<span class="doccomment">///         /// Returns the current value of the Flipper&#39;s boolean.</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///         pub fn get(&amp;self) -&gt; bool {</span>
<span class="doccomment">///             self.value</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///     }</span>
<span class="doccomment">/// }</span>
<span class="doccomment">/// ```</span>
<span class="attribute">#[<span class="ident">proc_macro_attribute</span>]</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">contract</span>(<span class="ident">attr</span>: <span class="ident">TokenStream</span>, <span class="ident">item</span>: <span class="ident">TokenStream</span>) -&gt; <span class="ident">TokenStream</span> {
    <span class="ident">contract::generate</span>(<span class="ident">attr</span>.<span class="ident">into</span>(), <span class="ident">item</span>.<span class="ident">into</span>()).<span class="ident">into</span>()
}

<span class="doccomment">/// Marks trait definitions to ink! as special ink! trait definitions.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// There are some restrictions that apply to ink! trait definitions that</span>
<span class="doccomment">/// this macro checks. Also ink! trait definitions are required to have specialized</span>
<span class="doccomment">/// structure so that the main [`#[ink::contract]`](`macro@crate::contract`) macro can</span>
<span class="doccomment">/// properly generate code for its implementations.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Example</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Trait definition:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// # type Balance = &lt;ink_env::DefaultEnvironment as ink_env::Environment&gt;::Balance;</span>
<span class="doccomment">/// # type AccountId = &lt;ink_env::DefaultEnvironment as ink_env::Environment&gt;::AccountId;</span>
<span class="doccomment">///</span>
<span class="doccomment">/// #[ink::trait_definition]</span>
<span class="doccomment">/// pub trait Erc20 {</span>
<span class="doccomment">///     /// Returns the total supply of the ERC-20 smart contract.</span>
<span class="doccomment">///     #[ink(message)]</span>
<span class="doccomment">///     fn total_supply(&amp;self) -&gt; Balance;</span>
<span class="doccomment">///</span>
<span class="doccomment">///     /// Transfers balance from the caller to the given address.</span>
<span class="doccomment">///     #[ink(message)]</span>
<span class="doccomment">///     fn transfer(&amp;mut self, amount: Balance, to: AccountId) -&gt; bool;</span>
<span class="doccomment">///</span>
<span class="doccomment">///     // etc.</span>
<span class="doccomment">/// }</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Trait implementation</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Given the above trait definition you can implement it as shown below:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// #[ink::contract]</span>
<span class="doccomment">/// mod base_erc20 {</span>
<span class="doccomment">/// #    // We somehow cannot put the trait in the doc-test crate root due to bugs.</span>
<span class="doccomment">/// #    #[ink::trait_definition]</span>
<span class="doccomment">/// #    pub trait Erc20 {</span>
<span class="doccomment">/// #       /// Returns the total supply of the ERC-20 smart contract.</span>
<span class="doccomment">/// #       #[ink(message)]</span>
<span class="doccomment">/// #       fn total_supply(&amp;self) -&gt; Balance;</span>
<span class="doccomment">/// #</span>
<span class="doccomment">/// #       /// Transfers balance from the caller to the given address.</span>
<span class="doccomment">/// #       #[ink(message)]</span>
<span class="doccomment">/// #       fn transfer(&amp;mut self, amount: Balance, to: AccountId) -&gt; bool;</span>
<span class="doccomment">/// #    }</span>
<span class="doccomment">/// #</span>
<span class="doccomment">///     #[ink(storage)]</span>
<span class="doccomment">///     pub struct BaseErc20 {</span>
<span class="doccomment">///         total_supply: Balance,</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///</span>
<span class="doccomment">///     impl BaseErc20 {</span>
<span class="doccomment">///         #[ink(constructor)]</span>
<span class="doccomment">///         pub fn new(initial_supply: Balance) -&gt; Self {</span>
<span class="doccomment">///             Self { total_supply: initial_supply }</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///</span>
<span class="doccomment">///     impl Erc20 for BaseErc20 {</span>
<span class="doccomment">///         /// Returns the total supply of the ERC-20 smart contract.</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///         fn total_supply(&amp;self) -&gt; Balance {</span>
<span class="doccomment">///             self.total_supply</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///         fn transfer(&amp;mut self, amount: Balance, to: AccountId) -&gt; bool {</span>
<span class="doccomment">///             unimplemented!()</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///     }</span>
<span class="doccomment">/// }</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ## Header Arguments</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The `#[ink::trait_definition]` macro can be provided with some additional comma-separated</span>
<span class="doccomment">/// header arguments:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// - `namespace: String`</span>
<span class="doccomment">///</span>
<span class="doccomment">///     The namespace configuration parameter is used to influence the generated</span>
<span class="doccomment">///     selectors of the ink! trait messages. This is useful to disambiguate</span>
<span class="doccomment">///     ink! trait definitions with equal names.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Usage Example:**</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///     #[ink::trait_definition(namespace = &quot;foo&quot;)]</span>
<span class="doccomment">///     pub trait TraitDefinition {</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///         fn message1(&amp;self);</span>
<span class="doccomment">///</span>
<span class="doccomment">///         #[ink(message, selector = 42)]</span>
<span class="doccomment">///         fn message2(&amp;self);</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Default value:** Empty.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// - `keep_attr: String`</span>
<span class="doccomment">///</span>
<span class="doccomment">///     Tells the ink! code generator which attributes should be passed to call builders.</span>
<span class="doccomment">///     Call builders are used to doing cross-contract calls and are automatically</span>
<span class="doccomment">///     generated for contracts.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Usage Example:**</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///     #[ink::trait_definition(keep_attr = &quot;foo, bar&quot;)]</span>
<span class="doccomment">///     pub trait Storage {</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///     //  #[foo]</span>
<span class="doccomment">///         fn message1(&amp;self);</span>
<span class="doccomment">///</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///     //  #[bar]</span>
<span class="doccomment">///         fn message2(&amp;self);</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Allowed attributes by default:** `cfg`, `cfg_attr`, `allow`, `warn`, `deny`, `forbid`,</span>
<span class="doccomment">///         `deprecated`, `must_use`, `doc`, `rustfmt`.</span>
<span class="attribute">#[<span class="ident">proc_macro_attribute</span>]</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">trait_definition</span>(<span class="ident">attr</span>: <span class="ident">TokenStream</span>, <span class="ident">item</span>: <span class="ident">TokenStream</span>) -&gt; <span class="ident">TokenStream</span> {
    <span class="ident">trait_def::analyze</span>(<span class="ident">attr</span>.<span class="ident">into</span>(), <span class="ident">item</span>.<span class="ident">into</span>()).<span class="ident">into</span>()
}

<span class="doccomment">/// Prepares the type to be fully compatible and usable with the storage.</span>
<span class="doccomment">/// It implements all necessary traits and calculates the storage key for types.</span>
<span class="doccomment">/// `Packed` types don&#39;t have a storage key, but non-packed types (like `Mapping`, `Lazy` etc.)</span>
<span class="doccomment">/// require calculating the storage key during compilation.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Consider annotating structs and enums that are intended to be a part of</span>
<span class="doccomment">/// the storage with this macro. If the type is packed then the usage of the</span>
<span class="doccomment">/// macro is optional.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// If the type is non-packed it is best to rely on automatic storage key</span>
<span class="doccomment">/// calculation via `ink::storage_item`.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The usage of `KEY: StorageKey` generic allows to propagate the parent&#39;s storage key to the type</span>
<span class="doccomment">/// and offset the storage key of the type. It is helpful for non-packed types that can be used</span>
<span class="doccomment">/// several times in the contract. Each field should have a unique storage key, so propagation of</span>
<span class="doccomment">/// the parent&#39;s storage key allows one to achieve it.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The macro should be called before `derive` macros because it can change the type.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// All required traits can be:</span>
<span class="doccomment">/// - Derived manually via `#[derive(...)]`.</span>
<span class="doccomment">/// - Derived automatically via deriving of `scale::Decode` and `scale::Encode`.</span>
<span class="doccomment">/// - Derived via this macro.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Example</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ## Trait implementation</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// use ink_prelude::vec::Vec;</span>
<span class="doccomment">/// use ink::storage::{</span>
<span class="doccomment">///     Lazy,</span>
<span class="doccomment">///     Mapping,</span>
<span class="doccomment">/// };</span>
<span class="doccomment">/// use ink::storage::traits::{</span>
<span class="doccomment">///     StorageKey,</span>
<span class="doccomment">///     StorableHint,</span>
<span class="doccomment">/// };</span>
<span class="doccomment">/// use ink::storage::traits::Storable;</span>
<span class="doccomment">///</span>
<span class="doccomment">/// // Deriving `scale::Decode` and `scale::Encode` also derives blanket implementation of all</span>
<span class="doccomment">/// // required traits to be storable.</span>
<span class="doccomment">/// #[derive(scale::Decode, scale::Encode)]</span>
<span class="doccomment">/// #[cfg_attr(</span>
<span class="doccomment">///     feature = &quot;std&quot;,</span>
<span class="doccomment">///     derive(scale_info::TypeInfo, ink::storage::traits::StorageLayout)</span>
<span class="doccomment">/// )]</span>
<span class="doccomment">/// struct Packed {</span>
<span class="doccomment">///     s1: u128,</span>
<span class="doccomment">///     s2: Vec&lt;u128&gt;,</span>
<span class="doccomment">///     // Fails because `StorableHint` is only implemented for `Vec` where `T: Packed`.</span>
<span class="doccomment">///     // s3: Vec&lt;NonPacked&gt;,</span>
<span class="doccomment">/// }</span>
<span class="doccomment">///</span>
<span class="doccomment">/// // Example of how to define the packed type with generic.</span>
<span class="doccomment">/// #[derive(scale::Decode, scale::Encode)]</span>
<span class="doccomment">/// #[cfg_attr(</span>
<span class="doccomment">///     feature = &quot;std&quot;,</span>
<span class="doccomment">///     derive(scale_info::TypeInfo, ink::storage::traits::StorageLayout)</span>
<span class="doccomment">/// )]</span>
<span class="doccomment">/// struct PackedGeneric&lt;T: ink::storage::traits::Packed&gt; {</span>
<span class="doccomment">///     s1: (u128, bool),</span>
<span class="doccomment">///     s2: Vec&lt;T&gt;,</span>
<span class="doccomment">///     s3: String,</span>
<span class="doccomment">/// }</span>
<span class="doccomment">///</span>
<span class="doccomment">/// // Example of how to define the non-packed type.</span>
<span class="doccomment">/// #[ink::storage_item]</span>
<span class="doccomment">/// struct NonPacked {</span>
<span class="doccomment">///     s1: Mapping&lt;u32, u128&gt;,</span>
<span class="doccomment">///     s2: Lazy&lt;u128&gt;,</span>
<span class="doccomment">/// }</span>
<span class="doccomment">///</span>
<span class="doccomment">/// // Example of how to define the non-packed generic type.</span>
<span class="doccomment">/// #[ink::storage_item(derive = false)]</span>
<span class="doccomment">/// #[derive(Storable, StorableHint, StorageKey)]</span>
<span class="doccomment">/// #[cfg_attr(</span>
<span class="doccomment">///     feature = &quot;std&quot;,</span>
<span class="doccomment">///     derive(scale_info::TypeInfo, ink::storage::traits::StorageLayout)</span>
<span class="doccomment">/// )]</span>
<span class="doccomment">/// struct NonPackedGeneric&lt;T: ink::storage::traits::Packed&gt; {</span>
<span class="doccomment">///     s1: u32,</span>
<span class="doccomment">///     s2: T,</span>
<span class="doccomment">///     s3: Mapping&lt;u128, T&gt;,</span>
<span class="doccomment">/// }</span>
<span class="doccomment">///</span>
<span class="doccomment">/// // Example of how to define a complex packed type.</span>
<span class="doccomment">/// #[derive(scale::Decode, scale::Encode)]</span>
<span class="doccomment">/// #[cfg_attr(</span>
<span class="doccomment">///     feature = &quot;std&quot;,</span>
<span class="doccomment">///     derive(scale_info::TypeInfo, ink::storage::traits::StorageLayout)</span>
<span class="doccomment">/// )]</span>
<span class="doccomment">/// struct PackedComplex {</span>
<span class="doccomment">///     s1: u128,</span>
<span class="doccomment">///     s2: Vec&lt;u128&gt;,</span>
<span class="doccomment">///     s3: Vec&lt;Packed&gt;,</span>
<span class="doccomment">/// }</span>
<span class="doccomment">///</span>
<span class="doccomment">/// // Example of how to define a complex non-packed type.</span>
<span class="doccomment">/// #[ink::storage_item]</span>
<span class="doccomment">/// struct NonPackedComplex&lt;KEY: StorageKey&gt; {</span>
<span class="doccomment">///     s1: (String, u128, Packed),</span>
<span class="doccomment">///     s2: Mapping&lt;u128, u128&gt;,</span>
<span class="doccomment">///     s3: Lazy&lt;u128&gt;,</span>
<span class="doccomment">///     s4: Mapping&lt;u128, Packed&gt;,</span>
<span class="doccomment">///     s5: Lazy&lt;NonPacked&gt;,</span>
<span class="doccomment">///     s6: PackedGeneric&lt;Packed&gt;,</span>
<span class="doccomment">///     s7: NonPackedGeneric&lt;Packed&gt;,</span>
<span class="doccomment">///     // Fails because: the trait `ink::storage::traits::Packed` is not implemented for `NonPacked`</span>
<span class="doccomment">///     // s8: Mapping&lt;u128, NonPacked&gt;,</span>
<span class="doccomment">/// }</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ## Header Arguments</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The `#[ink::storage_item]` macro can be provided with an additional comma-separated</span>
<span class="doccomment">/// header argument:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// - `derive: bool`</span>
<span class="doccomment">///</span>
<span class="doccomment">///     The `derive` configuration parameter is used to enable/disable auto deriving of</span>
<span class="doccomment">///     all required storage traits.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Usage Example:**</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///     use ink::storage::Mapping;</span>
<span class="doccomment">///     use ink::storage::traits::{</span>
<span class="doccomment">///         StorableHint,</span>
<span class="doccomment">///         StorageKey,</span>
<span class="doccomment">///     };</span>
<span class="doccomment">///     use ink::storage::traits::Storable;</span>
<span class="doccomment">///</span>
<span class="doccomment">///     #[ink::storage_item(derive = false)]</span>
<span class="doccomment">///     #[derive(StorableHint, Storable, StorageKey)]</span>
<span class="doccomment">///     struct NonPackedGeneric&lt;T: ink::storage::traits::Packed&gt; {</span>
<span class="doccomment">///         s1: u32,</span>
<span class="doccomment">///         s2: Mapping&lt;u128, T&gt;,</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Default value:** true.</span>
<span class="attribute">#[<span class="ident">proc_macro_attribute</span>]</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">storage_item</span>(<span class="ident">attr</span>: <span class="ident">TokenStream</span>, <span class="ident">item</span>: <span class="ident">TokenStream</span>) -&gt; <span class="ident">TokenStream</span> {
    <span class="ident">storage_item::generate</span>(<span class="ident">attr</span>.<span class="ident">into</span>(), <span class="ident">item</span>.<span class="ident">into</span>()).<span class="ident">into</span>()
}

<span class="doccomment">/// Defines a unit test that makes use of ink!&#39;s off-chain testing capabilities.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// If your unit test does not require the existence of an off-chain environment</span>
<span class="doccomment">/// it is fine to not use this macro since it bears some overhead with the test.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Note that this macro is not required to run unit tests that require ink!&#39;s</span>
<span class="doccomment">/// off-chain testing capabilities but merely improves code readability.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ## How do you find out if your test requires the off-chain environment?</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Normally if the test recursively uses or invokes some contract methods that</span>
<span class="doccomment">/// call a method defined in `self.env()` or `Self::env()`.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// An examples is the following:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```no_compile</span>
<span class="doccomment">/// let caller: AccountId = self.env().caller();</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Example</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// </span>
<span class="doccomment">/// #[cfg(test)]</span>
<span class="doccomment">/// mod tests {</span>
<span class="doccomment">///     // Conventional unit test that works with assertions.</span>
<span class="doccomment">///     #[ink::test]</span>
<span class="doccomment">///     fn test1() {</span>
<span class="doccomment">///         // test code comes here as usual</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///</span>
<span class="doccomment">///     // Conventional unit test that returns some Result.</span>
<span class="doccomment">///     // The test code can make use of operator-`?`.</span>
<span class="doccomment">///     #[ink::test]</span>
<span class="doccomment">///     fn test2() -&gt; Result&lt;(), ink_env::Error&gt; {</span>
<span class="doccomment">///         // test code that returns a Rust Result type</span>
<span class="doccomment">///     }</span>
<span class="doccomment">/// }</span>
<span class="doccomment">/// ```</span>
<span class="attribute">#[<span class="ident">proc_macro_attribute</span>]</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">test</span>(<span class="ident">attr</span>: <span class="ident">TokenStream</span>, <span class="ident">item</span>: <span class="ident">TokenStream</span>) -&gt; <span class="ident">TokenStream</span> {
    <span class="ident">ink_test::generate</span>(<span class="ident">attr</span>.<span class="ident">into</span>(), <span class="ident">item</span>.<span class="ident">into</span>()).<span class="ident">into</span>()
}

<span class="doccomment">/// Defines an End-to-End test.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The system requirements are:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// - A Substrate node with `pallet-contracts` running in the background.</span>
<span class="doccomment">///   You can e.g. use [`substrate-contracts-node`](https://github.com/paritytech/substrate-contracts-node)</span>
<span class="doccomment">///   and launch it with</span>
<span class="doccomment">///   `substrate-contracts-node -lerror,runtime::contracts=debug &gt; /tmp/contracts-node.log 2&gt;&amp;1`.</span>
<span class="doccomment">/// - A `cargo-contract` installation that can build the contract.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Before the test function is invoked the contract will have been build. Any errors</span>
<span class="doccomment">/// that occur during the contract build will prevent the test function from being</span>
<span class="doccomment">/// invoked.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ## Header Arguments</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The `#[ink::e2e_test]` macro can be provided with some additional comma-separated</span>
<span class="doccomment">/// header arguments:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// - `ws_url: String`</span>
<span class="doccomment">///</span>
<span class="doccomment">///     The `ws_url` denotes the WebSocket URL where to connect to the RPC</span>
<span class="doccomment">///     endpoint of the node.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Usage Example:**</span>
<span class="doccomment">///     ```no_compile</span>
<span class="doccomment">///     # // TODO(#xxx) Remove the `no_compile`.</span>
<span class="doccomment">///     type E2EResult&lt;T&gt; = std::result::Result&lt;T, Box&lt;dyn std::error::Error&gt;&gt;;</span>
<span class="doccomment">///     #[ink::e2e_test(ws_url = &quot;ws://localhost:9944&quot;)]</span>
<span class="doccomment">///     async fn e2e_contract_must_transfer_value_to_sender(</span>
<span class="doccomment">///         mut client: ink::env::e2e::Client&lt;C, E&gt;,</span>
<span class="doccomment">///     ) -&gt; E2EResult&lt;()&gt; {</span>
<span class="doccomment">///         Ok(())</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Default value:** `&quot;ws://localhost:9944&quot;`.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// - `node_log: String`</span>
<span class="doccomment">///</span>
<span class="doccomment">///     The `node_log` denotes the path under which to find the node&#39;s log.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Usage Example:**</span>
<span class="doccomment">///     ```no_compile</span>
<span class="doccomment">///     # // TODO(#xxx) Remove the `no_compile`.</span>
<span class="doccomment">///     type E2EResult&lt;T&gt; = std::result::Result&lt;T, Box&lt;dyn std::error::Error&gt;&gt;;</span>
<span class="doccomment">///     #[ink::e2e_test(ws_url = &quot;ws://localhost:9944&quot;)]</span>
<span class="doccomment">///     async fn e2e_contract_must_transfer_value_to_sender(</span>
<span class="doccomment">///         mut client: ink::env::e2e::Client&lt;C, E&gt;,</span>
<span class="doccomment">///     ) -&gt; E2EResult&lt;()&gt; {</span>
<span class="doccomment">///         assert!(client.node_log_contains(&quot;requested value: 100000000000000\n&quot;));</span>
<span class="doccomment">///         Ok(())</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Default value:** `&quot;/tmp/contracts-node.log&quot;`.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// - `skip_build: true`</span>
<span class="doccomment">///</span>
<span class="doccomment">///     Skips building the contract as part of the test. This is handy for debugging</span>
<span class="doccomment">///     test logic, when one wants to avoid the overhead of building the contract.</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Usage Example:**</span>
<span class="doccomment">///     ```no_compile</span>
<span class="doccomment">///     # // TODO(#xxx) Remove the `no_compile`.</span>
<span class="doccomment">///     type E2EResult&lt;T&gt; = std::result::Result&lt;T, Box&lt;dyn std::error::Error&gt;&gt;;</span>
<span class="doccomment">///     #[ink::e2e_test(skip_build = true)]</span>
<span class="doccomment">///     async fn e2e_contract_must_transfer_value_to_sender(</span>
<span class="doccomment">///         mut client: ink::env::e2e::Client&lt;C, E&gt;,</span>
<span class="doccomment">///     ) -&gt; E2EResult&lt;()&gt; {</span>
<span class="doccomment">///         Ok(())</span>
<span class="doccomment">///     }</span>
<span class="doccomment">///     ```</span>
<span class="doccomment">///</span>
<span class="doccomment">///     **Default value:** `false`.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Example</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```no_compile</span>
<span class="doccomment">/// # // TODO(#xxx) Remove the `no_compile`.</span>
<span class="doccomment">/// #[cfg(test)]</span>
<span class="doccomment">/// mod tests {</span>
<span class="doccomment">///     use ink::env::e2e::*;</span>
<span class="doccomment">///     type E2EResult&lt;T&gt; = std::result::Result&lt;T, Box&lt;dyn std::error::Error&gt;&gt;;</span>
<span class="doccomment">///</span>
<span class="doccomment">///     #[ink::e2e_test(skip_build = true)]</span>
<span class="doccomment">///     async fn e2e_test_2(mut client: ink::env::e2e::Client&lt;C,E&gt;) -&gt; E2EResult&lt;()&gt; {</span>
<span class="doccomment">///         // given</span>
<span class="doccomment">///         let constructor = contract_transfer::constructors::new();</span>
<span class="doccomment">///         let contract_acc_id = client.instantiate(</span>
<span class="doccomment">///             &amp;mut ink::env::e2e::alice(),</span>
<span class="doccomment">///             constructor,</span>
<span class="doccomment">///             1337,</span>
<span class="doccomment">///             None,</span>
<span class="doccomment">///         )</span>
<span class="doccomment">///         .await</span>
<span class="doccomment">///         .expect(&quot;instantiating contract failed&quot;)</span>
<span class="doccomment">///         .account_id;</span>
<span class="doccomment">///</span>
<span class="doccomment">///         // when</span>
<span class="doccomment">///         let transfer = contract_transfer::messages::give_me(120);</span>
<span class="doccomment">///         let call_res = client.call(</span>
<span class="doccomment">///             &amp;mut ink::env::e2e::bob(),</span>
<span class="doccomment">///             contract_acc_id.clone(),</span>
<span class="doccomment">///             transfer.into(),</span>
<span class="doccomment">///             10,</span>
<span class="doccomment">///             None,</span>
<span class="doccomment">///         )</span>
<span class="doccomment">///         .await;</span>
<span class="doccomment">///</span>
<span class="doccomment">///         // then</span>
<span class="doccomment">///         assert!(call_res.is_ok());</span>
<span class="doccomment">///         Ok(())</span>
<span class="doccomment">///     }</span>
<span class="doccomment">/// }</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// You can also use build the `Signer` type yourself, without going through</span>
<span class="doccomment">/// the pre-defined functions:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```no_compile</span>
<span class="doccomment">/// let mut bob = ink::env::e2e::PairSigner::new(</span>
<span class="doccomment">///     ink::env::e2e::AccountKeyring::Bob.pair()</span>
<span class="doccomment">/// );</span>
<span class="doccomment">/// ```</span>
<span class="attribute">#[<span class="ident">proc_macro_attribute</span>]</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">e2e_test</span>(<span class="ident">attr</span>: <span class="ident">TokenStream</span>, <span class="ident">item</span>: <span class="ident">TokenStream</span>) -&gt; <span class="ident">TokenStream</span> {
    <span class="ident">ink_e2e_test::generate</span>(<span class="ident">attr</span>.<span class="ident">into</span>(), <span class="ident">item</span>.<span class="ident">into</span>()).<span class="ident">into</span>()
}

<span class="doccomment">/// Defines the interface for a chain extension.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Structure</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The interface consists of an error code that indicates lightweight errors</span>
<span class="doccomment">/// as well as the definition of some chain extension methods.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The overall structure follows that of a simple Rust trait definition.</span>
<span class="doccomment">/// The error code is defined as an associated type definition of the trait definition.</span>
<span class="doccomment">/// The methods are defined as associated trait methods without implementation.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Chain extension methods must not have a `self` receiver such as `&amp;self` or `&amp;mut self`</span>
<span class="doccomment">/// and must have inputs and output that implement the SCALE encoding and decoding.</span>
<span class="doccomment">/// Their return value follows specific rules that can be altered using the `handle_status`</span>
<span class="doccomment">/// and `returns_result` attributes which are described in more detail below.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Usage</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Usually the chain extension definition using this procedural macro is provided</span>
<span class="doccomment">/// by the author of the chain extension in a separate crate.</span>
<span class="doccomment">/// ink! smart contracts using this chain extension simply depend on this crate</span>
<span class="doccomment">/// and use its associated environment definition in order to make use of</span>
<span class="doccomment">/// the methods provided by the chain extension.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Attributes</span>
<span class="doccomment">///</span>
<span class="doccomment">/// There are three different attributes with which the chain extension methods</span>
<span class="doccomment">/// can be flagged:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// | Attribute | Required | Default Value | Description |</span>
<span class="doccomment">/// |:----------|:--------:|:--------------|:-----------:|</span>
<span class="doccomment">/// | `ink(extension = N: u32)` | Yes | - | Determines the unique function ID of the chain extension method. |</span>
<span class="doccomment">/// | `ink(handle_status = flag: bool)` | Optional | `true` | Assumes that the returned status code of the chain extension method always indicates success and therefore always loads and decodes the output buffer of the call. |</span>
<span class="doccomment">/// | `ink(returns_result = flag: bool)` | Optional | `true` | By default chain extension methods are assumed to return a `Result&lt;T, E&gt;` in the output buffer. Using `returns_result = false` this check is disabled and the chain extension method may return any other type. |</span>
<span class="doccomment">///</span>
<span class="doccomment">/// As with all ink! attributes multiple of them can either appear in a contiguous list:</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// # type Access = i32;</span>
<span class="doccomment">/// # #[ink::chain_extension]</span>
<span class="doccomment">/// # pub trait MyChainExtension {</span>
<span class="doccomment">/// #     type ErrorCode = i32;</span>
<span class="doccomment">/// #[ink(extension = 5, handle_status = false, returns_result = false)]</span>
<span class="doccomment">/// fn key_access_for_account(key: &amp;[u8], account: &amp;[u8]) -&gt; Access;</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// …or as multiple stand alone ink! attributes applied to the same item:</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// # type Access = i32;</span>
<span class="doccomment">/// # #[ink::chain_extension]</span>
<span class="doccomment">/// # pub trait MyChainExtension {</span>
<span class="doccomment">/// #     type ErrorCode = i32;</span>
<span class="doccomment">/// #[ink(extension = 5)]</span>
<span class="doccomment">/// #[ink(handle_status = false)]</span>
<span class="doccomment">/// #[ink(returns_result = false)]</span>
<span class="doccomment">/// fn key_access_for_account(key: &amp;[u8], account: &amp;[u8]) -&gt; Access;</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ## Details: `handle_status`</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Default value: `true`</span>
<span class="doccomment">///</span>
<span class="doccomment">/// By default all chain extension methods return a `Result&lt;T, E&gt;` where `E: From&lt;Self::ErrorCode&gt;`.</span>
<span class="doccomment">/// The `Self::ErrorCode` represents the error code of the chain extension.</span>
<span class="doccomment">/// This means that a smart contract calling such a chain extension method first queries the returned</span>
<span class="doccomment">/// status code of the chain extension method and only loads and decodes the output if the returned</span>
<span class="doccomment">/// status code indicates a successful call.</span>
<span class="doccomment">/// This design was chosen as it is more efficient when no output besides the error</span>
<span class="doccomment">/// code is required for a chain extension call. When designing a chain extension try to utilize the</span>
<span class="doccomment">/// error code to return errors and only use the output buffer for information that does not fit in</span>
<span class="doccomment">/// a single `u32` value.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// A chain extension method that is flagged with `handle_status = false` assumes that the returned error code</span>
<span class="doccomment">/// will always indicate success. Therefore it will always load and decode the output buffer and loses</span>
<span class="doccomment">/// the `E: From&lt;Self::ErrorCode&gt;` constraint for the call.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ## Details: `returns_result`</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Default value: `true`</span>
<span class="doccomment">///</span>
<span class="doccomment">/// By default chain extension methods are assumed to return a value of type `Result&lt;T, E&gt;` through the</span>
<span class="doccomment">/// output buffer. Using `returns_result = false` this check is disabled and the chain extension method may return</span>
<span class="doccomment">/// any other type.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Note that if a chain extension method is attributed with `returns_result = false`</span>
<span class="doccomment">/// and with `handle_status = true` it will still return a value of type `Result&lt;T, Self::ErrorCode&gt;`.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ## Usage: `handle_status` and `returns_result`</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Use both `handle_status = false` and `returns_result = false` for the same chain extension method</span>
<span class="doccomment">/// if a call to it may never fail and never returns a `Result` type.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Combinations</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Due to the possibility to flag a chain extension method with `handle_status` and `returns_result`</span>
<span class="doccomment">/// there are 4 different cases with slightly varying semantics:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// | `handle_status` | `returns_result` | Effects |</span>
<span class="doccomment">/// |:---------------:|:----------------:|:--------|</span>
<span class="doccomment">/// | `true`  | `true`  | The chain extension method is required to return a value of type `Result&lt;T, E&gt;` where `E: From&lt;Self::ErrorCode&gt;`. A call will always check if the returned status code indicates success and only then will load and decode the value in the output buffer. |</span>
<span class="doccomment">/// | `true`  | `false` | The chain extension method may return any non-`Result` type. A call will always check if the returned status code indicates success and only then will load and decode the value in the output buffer. The actual return type of the chain extension method is still `Result&lt;T, Self::ErrorCode&gt;` when the chain extension method was defined to return a value of type `T`. |</span>
<span class="doccomment">/// | `false` | `true`  | The chain extension method is required to return a value of type `Result&lt;T, E&gt;`. A call will always assume that the returned status code indicates success and therefore always load and decode the output buffer directly. |</span>
<span class="doccomment">/// | `false` | `false` | The chain extension method may return any non-`Result` type. A call will always assume that the returned status code indicates success and therefore always load and decode the output buffer directly. |</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Error Code</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Every chain extension defines exactly one `ErrorCode` using the following syntax:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// </span>
<span class="doccomment">/// #[ink::chain_extension]</span>
<span class="doccomment">/// pub trait MyChainExtension {</span>
<span class="doccomment">///     type ErrorCode = MyErrorCode;</span>
<span class="doccomment">///</span>
<span class="doccomment">///     // more definitions</span>
<span class="doccomment">/// }</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// The defined `ErrorCode` must implement `FromStatusCode` which should be implemented as a</span>
<span class="doccomment">/// more or less trivial conversion from the `u32` status code to a `Result&lt;(), Self::ErrorCode&gt;`.</span>
<span class="doccomment">/// The `Ok(())` value indicates that the call to the chain extension method was successful.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// By convention an error code of `0` represents success.</span>
<span class="doccomment">/// However, chain extension authors may use whatever suits their needs.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Example: Definition</span>
<span class="doccomment">///</span>
<span class="doccomment">/// In the below example a chain extension is defined that allows its users to read and write</span>
<span class="doccomment">/// from and to the runtime storage using access privileges:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// </span>
<span class="doccomment">/// /// Custom chain extension to read to and write from the runtime.</span>
<span class="doccomment">/// #[ink::chain_extension]</span>
<span class="doccomment">/// pub trait RuntimeReadWrite {</span>
<span class="doccomment">///     type ErrorCode = ReadWriteErrorCode;</span>
<span class="doccomment">///</span>
<span class="doccomment">///     /// Reads from runtime storage.</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// # Note</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// Actually returns a value of type `Result&lt;Vec&lt;u8&gt;, Self::ErrorCode&gt;`.</span>
<span class="doccomment">///     #[ink(extension = 1, returns_result = false)]</span>
<span class="doccomment">///     fn read(key: &amp;[u8]) -&gt; Vec&lt;u8&gt;;</span>
<span class="doccomment">///</span>
<span class="doccomment">///     /// Reads from runtime storage.</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// Returns the number of bytes read and up to 32 bytes of the</span>
<span class="doccomment">///     /// read value. Unused bytes in the output are set to 0.</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// # Errors</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// If the runtime storage cell stores a value that requires more than</span>
<span class="doccomment">///     /// 32 bytes.</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// # Note</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// This requires `ReadWriteError` to implement `From&lt;ReadWriteErrorCode&gt;`</span>
<span class="doccomment">///     /// and may potentially return any `Self::ErrorCode` through its return value.</span>
<span class="doccomment">///     #[ink(extension = 2)]</span>
<span class="doccomment">///     fn read_small(key: &amp;[u8]) -&gt; Result&lt;(u32, [u8; 32]), ReadWriteError&gt;;</span>
<span class="doccomment">///</span>
<span class="doccomment">///     /// Writes into runtime storage.</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// # Note</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// Actually returns a value of type `Result&lt;(), Self::ErrorCode&gt;`.</span>
<span class="doccomment">///     #[ink(extension = 3, returns_result = false)]</span>
<span class="doccomment">///     fn write(key: &amp;[u8], value: &amp;[u8]);</span>
<span class="doccomment">///</span>
<span class="doccomment">///     /// Returns the access allowed for the key for the caller.</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// # Note</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// Assumes to never fail the call and therefore always returns `Option&lt;Access&gt;`.</span>
<span class="doccomment">///     #[ink(extension = 4, returns_result = false, handle_status = false)]</span>
<span class="doccomment">///     fn access(key: &amp;[u8]) -&gt; Option&lt;Access&gt;;</span>
<span class="doccomment">///</span>
<span class="doccomment">///     /// Unlocks previously aquired permission to access key.</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// # Errors</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// If the permission was not granted.</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// # Note</span>
<span class="doccomment">///     ///</span>
<span class="doccomment">///     /// Assumes the call to never fail and therefore does _NOT_ require `UnlockAccessError`</span>
<span class="doccomment">///     /// to implement `From&lt;Self::ErrorCode&gt;` as in the `read_small` method above.</span>
<span class="doccomment">///     #[ink(extension = 5, handle_status = false)]</span>
<span class="doccomment">///     fn unlock_access(key: &amp;[u8], access: Access) -&gt; Result&lt;(), UnlockAccessError&gt;;</span>
<span class="doccomment">/// }</span>
<span class="doccomment">/// # #[derive(scale::Encode, scale::Decode, scale_info::TypeInfo)]</span>
<span class="doccomment">/// # pub enum ReadWriteErrorCode {</span>
<span class="doccomment">/// #     InvalidKey,</span>
<span class="doccomment">/// #     CannotWriteToKey,</span>
<span class="doccomment">/// #     CannotReadFromKey,</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # #[derive(scale::Encode, scale::Decode, scale_info::TypeInfo)]</span>
<span class="doccomment">/// # pub enum ReadWriteError {</span>
<span class="doccomment">/// #     ErrorCode(ReadWriteErrorCode),</span>
<span class="doccomment">/// #     BufferTooSmall { required_bytes: u32 },</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # impl From&lt;ReadWriteErrorCode&gt; for ReadWriteError {</span>
<span class="doccomment">/// #     fn from(error_code: ReadWriteErrorCode) -&gt; Self {</span>
<span class="doccomment">/// #         Self::ErrorCode(error_code)</span>
<span class="doccomment">/// #     }</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # impl From&lt;scale::Error&gt; for ReadWriteError {</span>
<span class="doccomment">/// #     fn from(_: scale::Error) -&gt; Self {</span>
<span class="doccomment">/// #         panic!(&quot;encountered unexpected invalid SCALE encoding&quot;)</span>
<span class="doccomment">/// #     }</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # #[derive(scale::Encode, scale::Decode, scale_info::TypeInfo)]</span>
<span class="doccomment">/// # pub struct UnlockAccessError {</span>
<span class="doccomment">/// #     reason: String,</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # impl From&lt;scale::Error&gt; for UnlockAccessError {</span>
<span class="doccomment">/// #     fn from(_: scale::Error) -&gt; Self {</span>
<span class="doccomment">/// #         panic!(&quot;encountered unexpected invalid SCALE encoding&quot;)</span>
<span class="doccomment">/// #     }</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # #[derive(scale::Encode, scale::Decode, scale_info::TypeInfo)]</span>
<span class="doccomment">/// # pub enum Access {</span>
<span class="doccomment">/// #     ReadWrite,</span>
<span class="doccomment">/// #     ReadOnly,</span>
<span class="doccomment">/// #     WriteOnly,</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # impl ink_env::chain_extension::FromStatusCode for ReadWriteErrorCode {</span>
<span class="doccomment">/// #     fn from_status_code(status_code: u32) -&gt; Result&lt;(), Self&gt; {</span>
<span class="doccomment">/// #         match status_code {</span>
<span class="doccomment">/// #             0 =&gt; Ok(()),</span>
<span class="doccomment">/// #             1 =&gt; Err(Self::InvalidKey),</span>
<span class="doccomment">/// #             2 =&gt; Err(Self::CannotWriteToKey),</span>
<span class="doccomment">/// #             3 =&gt; Err(Self::CannotReadFromKey),</span>
<span class="doccomment">/// #             _ =&gt; panic!(&quot;encountered unknown status code&quot;),</span>
<span class="doccomment">/// #         }</span>
<span class="doccomment">/// #     }</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// All the error types and other utility types used in the chain extension definition</span>
<span class="doccomment">/// above are often required to implement various traits such as SCALE&#39;s `Encode` and `Decode`</span>
<span class="doccomment">/// as well as `scale-info`&#39;s `TypeInfo` trait.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// A full example of the above chain extension definition can be seen</span>
<span class="doccomment">/// [here](https://github.com/paritytech/ink/blob/017f71d60799b764425334f86b732cc7b7065fe6/crates/lang/macro/tests/ui/chain_extension/simple.rs).</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Example: Environment</span>
<span class="doccomment">///</span>
<span class="doccomment">/// In order to allow ink! smart contracts to use the above defined chain extension it needs</span>
<span class="doccomment">/// to be integrated into an `Environment` definition as shown below:</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// # type RuntimeReadWrite = i32;</span>
<span class="doccomment">/// #</span>
<span class="doccomment">/// use ink_env::{Environment, DefaultEnvironment};</span>
<span class="doccomment">///</span>
<span class="doccomment">/// pub enum CustomEnvironment {}</span>
<span class="doccomment">///</span>
<span class="doccomment">/// impl Environment for CustomEnvironment {</span>
<span class="doccomment">///     const MAX_EVENT_TOPICS: usize =</span>
<span class="doccomment">///         &lt;DefaultEnvironment as Environment&gt;::MAX_EVENT_TOPICS;</span>
<span class="doccomment">///</span>
<span class="doccomment">///     type AccountId = &lt;DefaultEnvironment as Environment&gt;::AccountId;</span>
<span class="doccomment">///     type Balance = &lt;DefaultEnvironment as Environment&gt;::Balance;</span>
<span class="doccomment">///     type Hash = &lt;DefaultEnvironment as Environment&gt;::Hash;</span>
<span class="doccomment">///     type BlockNumber = &lt;DefaultEnvironment as Environment&gt;::BlockNumber;</span>
<span class="doccomment">///     type Timestamp = &lt;DefaultEnvironment as Environment&gt;::Timestamp;</span>
<span class="doccomment">///</span>
<span class="doccomment">///     type ChainExtension = RuntimeReadWrite;</span>
<span class="doccomment">/// }</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Above we defined the `CustomEnvironment` which defaults to ink!&#39;s `DefaultEnvironment`</span>
<span class="doccomment">/// for all constants and types but the `ChainExtension` type which is assigned to our newly</span>
<span class="doccomment">/// defined chain extension.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Example: Usage</span>
<span class="doccomment">///</span>
<span class="doccomment">/// An ink! smart contract can use the above defined chain extension through the `Environment`</span>
<span class="doccomment">/// definition defined in the last example section using the `env` macro parameter as</span>
<span class="doccomment">/// shown below.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// Note that chain extension methods are accessible through `Self::extension()` or</span>
<span class="doccomment">/// `self.extension()`. For example as in `Self::extension().read(...)` or</span>
<span class="doccomment">/// `self.extension().read(...)`.</span>
<span class="doccomment">///</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">/// #[ink::contract(env = CustomEnvironment)]</span>
<span class="doccomment">/// mod read_writer {</span>
<span class="doccomment">///     #[ink(storage)]</span>
<span class="doccomment">///     pub struct ReadWriter {}</span>
<span class="doccomment">///</span>
<span class="doccomment">///     impl ReadWriter {</span>
<span class="doccomment">///         #[ink(constructor)]</span>
<span class="doccomment">///         pub fn new() -&gt; Self { Self {} }</span>
<span class="doccomment">///</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///         pub fn read(&amp;self, key: Vec&lt;u8&gt;) -&gt; Result&lt;Vec&lt;u8&gt;, ReadWriteErrorCode&gt; {</span>
<span class="doccomment">///             self.env()</span>
<span class="doccomment">///                 .extension()</span>
<span class="doccomment">///                 .read(&amp;key)</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///         pub fn read_small(&amp;self, key: Vec&lt;u8&gt;) -&gt; Result&lt;(u32, [u8; 32]), ReadWriteError&gt; {</span>
<span class="doccomment">///             self.env()</span>
<span class="doccomment">///                 .extension()</span>
<span class="doccomment">///                 .read_small(&amp;key)</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///         pub fn write(</span>
<span class="doccomment">///             &amp;self,</span>
<span class="doccomment">///             key: Vec&lt;u8&gt;,</span>
<span class="doccomment">///             value: Vec&lt;u8&gt;,</span>
<span class="doccomment">///         ) -&gt; Result&lt;(), ReadWriteErrorCode&gt; {</span>
<span class="doccomment">///             self.env()</span>
<span class="doccomment">///                 .extension()</span>
<span class="doccomment">///                 .write(&amp;key, &amp;value)</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///         pub fn access(&amp;self, key: Vec&lt;u8&gt;) -&gt; Option&lt;Access&gt; {</span>
<span class="doccomment">///             self.env()</span>
<span class="doccomment">///                 .extension()</span>
<span class="doccomment">///                 .access(&amp;key)</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///</span>
<span class="doccomment">///         #[ink(message)]</span>
<span class="doccomment">///         pub fn unlock_access(&amp;self, key: Vec&lt;u8&gt;, access: Access) -&gt; Result&lt;(), UnlockAccessError&gt; {</span>
<span class="doccomment">///             self.env()</span>
<span class="doccomment">///                 .extension()</span>
<span class="doccomment">///                 .unlock_access(&amp;key, access)</span>
<span class="doccomment">///         }</span>
<span class="doccomment">///     }</span>
<span class="doccomment">/// # /// Custom chain extension to read to and write from the runtime.</span>
<span class="doccomment">/// # #[ink::chain_extension]</span>
<span class="doccomment">/// # pub trait RuntimeReadWrite {</span>
<span class="doccomment">/// #     type ErrorCode = ReadWriteErrorCode;</span>
<span class="doccomment">/// #     #[ink(extension = 1, returns_result = false)]</span>
<span class="doccomment">/// #     fn read(key: &amp;[u8]) -&gt; Vec&lt;u8&gt;;</span>
<span class="doccomment">/// #     #[ink(extension = 2)]</span>
<span class="doccomment">/// #     fn read_small(key: &amp;[u8]) -&gt; Result&lt;(u32, [u8; 32]), ReadWriteError&gt;;</span>
<span class="doccomment">/// #     #[ink(extension = 3, returns_result = false)]</span>
<span class="doccomment">/// #     fn write(key: &amp;[u8], value: &amp;[u8]);</span>
<span class="doccomment">/// #     #[ink(extension = 4, returns_result = false, handle_status = false)]</span>
<span class="doccomment">/// #     fn access(key: &amp;[u8]) -&gt; Option&lt;Access&gt;;</span>
<span class="doccomment">/// #     #[ink(extension = 5, handle_status = false)]</span>
<span class="doccomment">/// #     fn unlock_access(key: &amp;[u8], access: Access) -&gt; Result&lt;(), UnlockAccessError&gt;;</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # #[derive(scale::Encode, scale::Decode, scale_info::TypeInfo)]</span>
<span class="doccomment">/// # pub enum ReadWriteErrorCode {</span>
<span class="doccomment">/// #     InvalidKey,</span>
<span class="doccomment">/// #     CannotWriteToKey,</span>
<span class="doccomment">/// #     CannotReadFromKey,</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # #[derive(scale::Encode, scale::Decode, scale_info::TypeInfo)]</span>
<span class="doccomment">/// # pub enum ReadWriteError {</span>
<span class="doccomment">/// #     ErrorCode(ReadWriteErrorCode),</span>
<span class="doccomment">/// #     BufferTooSmall { required_bytes: u32 },</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # impl From&lt;ReadWriteErrorCode&gt; for ReadWriteError {</span>
<span class="doccomment">/// #     fn from(error_code: ReadWriteErrorCode) -&gt; Self {</span>
<span class="doccomment">/// #         Self::ErrorCode(error_code)</span>
<span class="doccomment">/// #     }</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # impl From&lt;scale::Error&gt; for ReadWriteError {</span>
<span class="doccomment">/// #     fn from(_: scale::Error) -&gt; Self {</span>
<span class="doccomment">/// #         panic!(&quot;encountered unexpected invalid SCALE encoding&quot;)</span>
<span class="doccomment">/// #     }</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # #[derive(scale::Encode, scale::Decode, scale_info::TypeInfo)]</span>
<span class="doccomment">/// # pub struct UnlockAccessError {</span>
<span class="doccomment">/// #     reason: String,</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # impl From&lt;scale::Error&gt; for UnlockAccessError {</span>
<span class="doccomment">/// #     fn from(_: scale::Error) -&gt; Self {</span>
<span class="doccomment">/// #         panic!(&quot;encountered unexpected invalid SCALE encoding&quot;)</span>
<span class="doccomment">/// #     }</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # #[derive(scale::Encode, scale::Decode, scale_info::TypeInfo)]</span>
<span class="doccomment">/// # pub enum Access {</span>
<span class="doccomment">/// #     ReadWrite,</span>
<span class="doccomment">/// #     ReadOnly,</span>
<span class="doccomment">/// #     WriteOnly,</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # impl ink_env::chain_extension::FromStatusCode for ReadWriteErrorCode {</span>
<span class="doccomment">/// #     fn from_status_code(status_code: u32) -&gt; Result&lt;(), Self&gt; {</span>
<span class="doccomment">/// #         match status_code {</span>
<span class="doccomment">/// #             0 =&gt; Ok(()),</span>
<span class="doccomment">/// #             1 =&gt; Err(Self::InvalidKey),</span>
<span class="doccomment">/// #             2 =&gt; Err(Self::CannotWriteToKey),</span>
<span class="doccomment">/// #             3 =&gt; Err(Self::CannotReadFromKey),</span>
<span class="doccomment">/// #             _ =&gt; panic!(&quot;encountered unknown status code&quot;),</span>
<span class="doccomment">/// #         }</span>
<span class="doccomment">/// #     }</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// # pub enum CustomEnvironment {}</span>
<span class="doccomment">/// # impl ink_env::Environment for CustomEnvironment {</span>
<span class="doccomment">/// #     const MAX_EVENT_TOPICS: usize =</span>
<span class="doccomment">/// #         &lt;ink_env::DefaultEnvironment as ink_env::Environment&gt;::MAX_EVENT_TOPICS;</span>
<span class="doccomment">/// #</span>
<span class="doccomment">/// #     type AccountId = &lt;ink_env::DefaultEnvironment as ink_env::Environment&gt;::AccountId;</span>
<span class="doccomment">/// #     type Balance = &lt;ink_env::DefaultEnvironment as ink_env::Environment&gt;::Balance;</span>
<span class="doccomment">/// #     type Hash = &lt;ink_env::DefaultEnvironment as ink_env::Environment&gt;::Hash;</span>
<span class="doccomment">/// #     type BlockNumber = &lt;ink_env::DefaultEnvironment as ink_env::Environment&gt;::BlockNumber;</span>
<span class="doccomment">/// #     type Timestamp = &lt;ink_env::DefaultEnvironment as ink_env::Environment&gt;::Timestamp;</span>
<span class="doccomment">/// #</span>
<span class="doccomment">/// #     type ChainExtension = RuntimeReadWrite;</span>
<span class="doccomment">/// # }</span>
<span class="doccomment">/// }</span>
<span class="doccomment">/// ```</span>
<span class="doccomment">///</span>
<span class="doccomment">/// # Technical Limitations</span>
<span class="doccomment">///</span>
<span class="doccomment">/// - Due to technical limitations it is not possible to refer to the `ErrorCode` associated type</span>
<span class="doccomment">///   using `Self::ErrorCode` anywhere within the chain extension and its defined methods.</span>
<span class="doccomment">///   Instead chain extension authors should directly use the error code type when required.</span>
<span class="doccomment">///   This limitation might be lifted in future versions of ink!.</span>
<span class="doccomment">/// - It is not possible to declare other chain extension traits as super traits or super</span>
<span class="doccomment">///   chain extensions of another.</span>
<span class="attribute">#[<span class="ident">proc_macro_attribute</span>]</span>
<span class="kw">pub</span> <span class="kw">fn</span> <span class="ident">chain_extension</span>(<span class="ident">attr</span>: <span class="ident">TokenStream</span>, <span class="ident">item</span>: <span class="ident">TokenStream</span>) -&gt; <span class="ident">TokenStream</span> {
    <span class="ident">chain_extension::generate</span>(<span class="ident">attr</span>.<span class="ident">into</span>(), <span class="ident">item</span>.<span class="ident">into</span>()).<span class="ident">into</span>()
}

<span class="macro">synstructure::decl_derive!</span>(
    [<span class="ident">Storable</span>] =&gt;
    <span class="doccomment">/// Derives `ink::storage`&#39;s `Storable` trait for the given `struct`, `enum` or `union`.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// # Examples</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// ```</span>
    <span class="doccomment">/// use ink::storage::traits::Storable;</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// #[derive(Storable)]</span>
    <span class="doccomment">/// struct NamedFields {</span>
    <span class="doccomment">///     a: u32,</span>
    <span class="doccomment">///     b: [u32; 1],</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// let value = &lt;NamedFields as Storable&gt;::decode(&amp;mut &amp;[123, 123][..]);</span>
    <span class="doccomment">/// ```</span>
    <span class="ident">storage::storable_derive</span>
);
<span class="macro">synstructure::decl_derive!</span>(
    [<span class="ident">StorableHint</span>] =&gt;
    <span class="doccomment">/// Derives `ink::storage`&#39;s `StorableHint` trait for the given `struct` or `enum`.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// If the type declaration contains generic `StorageKey`,</span>
    <span class="doccomment">/// it will use it as salt to generate a combined storage key.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// # Examples</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// ```</span>
    <span class="doccomment">/// use ink::storage::traits::{</span>
    <span class="doccomment">///     Storable,</span>
    <span class="doccomment">///     StorableHint,</span>
    <span class="doccomment">///     StorageKey,</span>
    <span class="doccomment">///     AutoStorableHint,</span>
    <span class="doccomment">///     AutoKey,</span>
    <span class="doccomment">///     ManualKey,</span>
    <span class="doccomment">/// };</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// #[derive(Default, StorableHint, Storable)]</span>
    <span class="doccomment">/// struct NamedFields {</span>
    <span class="doccomment">///     a: u32,</span>
    <span class="doccomment">///     b: [u32; 32],</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// let _: NamedFields = &lt;NamedFields as StorableHint&lt;AutoKey&gt;&gt;::Type::default();</span>
    <span class="doccomment">/// let _: NamedFields = &lt;NamedFields as StorableHint&lt;ManualKey&lt;123&gt;&gt;&gt;::Type::default();</span>
    <span class="doccomment">/// ```</span>
    <span class="ident">storage::storable_hint_derive</span>
);
<span class="macro">synstructure::decl_derive!</span>(
    [<span class="ident">StorageKey</span>] =&gt;
    <span class="doccomment">/// Derives `ink::storage`&#39;s `StorageKey` trait for the given `struct` or `enum`.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// # Examples</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// ```</span>
    <span class="doccomment">/// use ink::storage::traits::{</span>
    <span class="doccomment">///     AutoStorableHint,</span>
    <span class="doccomment">///     StorageKey,</span>
    <span class="doccomment">///     ManualKey,</span>
    <span class="doccomment">///     AutoKey,</span>
    <span class="doccomment">/// };</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// #[derive(StorageKey)]</span>
    <span class="doccomment">/// struct NamedFields {</span>
    <span class="doccomment">///     a: u32,</span>
    <span class="doccomment">///     b: [u32; 32],</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// assert_eq!(&lt;NamedFields as StorageKey&gt;::KEY, 0);</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// #[derive(StorageKey)]</span>
    <span class="doccomment">/// struct NamedFieldsManualKey&lt;KEY: StorageKey&gt; {</span>
    <span class="doccomment">///     a: &lt;u32 as AutoStorableHint&lt;ManualKey&lt;0, KEY&gt;&gt;&gt;::Type,</span>
    <span class="doccomment">///     b: &lt;[u32; 32] as AutoStorableHint&lt;ManualKey&lt;1, KEY&gt;&gt;&gt;::Type,</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// assert_eq!(&lt;NamedFieldsManualKey&lt;()&gt; as StorageKey&gt;::KEY, 0);</span>
    <span class="doccomment">/// assert_eq!(&lt;NamedFieldsManualKey&lt;AutoKey&gt; as StorageKey&gt;::KEY, 0);</span>
    <span class="doccomment">/// assert_eq!(&lt;NamedFieldsManualKey&lt;ManualKey&lt;123&gt;&gt; as StorageKey&gt;::KEY, 123);</span>
    <span class="doccomment">/// ```</span>
    <span class="ident">storage::storage_key_derive</span>
);
<span class="macro">synstructure::decl_derive!</span>(
    [<span class="ident">StorageLayout</span>] =&gt;
    <span class="doccomment">/// Derives `ink::storage`&#39;s `StorageLayout` trait for the given `struct` or `enum`.</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// # Examples</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// ```</span>
    <span class="doccomment">/// use ink_metadata::layout::Layout::Struct;</span>
    <span class="doccomment">/// use ink::storage::traits::StorageLayout;</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// #[derive(StorageLayout)]</span>
    <span class="doccomment">/// struct NamedFields {</span>
    <span class="doccomment">///     a: u32,</span>
    <span class="doccomment">///     b: [u32; 32],</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// let key = 0x123;</span>
    <span class="doccomment">/// let mut value = NamedFields {</span>
    <span class="doccomment">///     a: 123,</span>
    <span class="doccomment">///     b: [22; 32],</span>
    <span class="doccomment">/// };</span>
    <span class="doccomment">///</span>
    <span class="doccomment">/// if let Struct(layout) = &lt;NamedFields as StorageLayout&gt;::layout(&amp;key) {</span>
    <span class="doccomment">///     assert_eq!(*layout.fields()[0].name(), &quot;a&quot;);</span>
    <span class="doccomment">///     assert_eq!(*layout.fields()[1].name(), &quot;b&quot;);</span>
    <span class="doccomment">/// }</span>
    <span class="doccomment">/// ```</span>
    <span class="ident">storage::storage_layout_derive</span>
);

<span class="attribute">#[<span class="ident">cfg</span>(<span class="ident">test</span>)]</span>
<span class="kw">pub</span> <span class="kw">use</span> <span class="ident">contract::generate_or_err</span>;
</code></pre></div>
</section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="ink_macro" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.64.0 (a55dd71d5 2022-09-19)" ></div></body></html>